{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction cov_1bki2n93fn() {\n  var path = \"/home/j/Documents/FreeBoardGames.org/src/games/common/Checkerboard.tsx\";\n  var hash = \"e1aa0d16c3c9ac3dc2fff2925ddbcee354b9e14a\";\n  var global = new Function(\"return this\")();\n  var gcv = \"__coverage__\";\n  var coverageData = {\n    path: \"/home/j/Documents/FreeBoardGames.org/src/games/common/Checkerboard.tsx\",\n    statementMap: {\n      \"0\": {\n        start: {\n          line: 35,\n          column: 17\n        },\n        end: {\n          line: 35,\n          column: 18\n        }\n      },\n      \"1\": {\n        start: {\n          line: 36,\n          column: 17\n        },\n        end: {\n          line: 36,\n          column: 18\n        }\n      },\n      \"2\": {\n        start: {\n          line: 63,\n          column: 24\n        },\n        end: {\n          line: 69,\n          column: 3\n        }\n      },\n      \"3\": {\n        start: {\n          line: 70,\n          column: 13\n        },\n        end: {\n          line: 70,\n          column: 36\n        }\n      },\n      \"4\": {\n        start: {\n          line: 73,\n          column: 21\n        },\n        end: {\n          line: 73,\n          column: 27\n        }\n      },\n      \"5\": {\n        start: {\n          line: 74,\n          column: 4\n        },\n        end: {\n          line: 74,\n          column: 82\n        }\n      },\n      \"6\": {\n        start: {\n          line: 79,\n          column: 19\n        },\n        end: {\n          line: 87,\n          column: 6\n        }\n      },\n      \"7\": {\n        start: {\n          line: 80,\n          column: 6\n        },\n        end: {\n          line: 86,\n          column: 7\n        }\n      },\n      \"8\": {\n        start: {\n          line: 81,\n          column: 23\n        },\n        end: {\n          line: 81,\n          column: 41\n        }\n      },\n      \"9\": {\n        start: {\n          line: 82,\n          column: 25\n        },\n        end: {\n          line: 82,\n          column: 72\n        }\n      },\n      \"10\": {\n        start: {\n          line: 83,\n          column: 8\n        },\n        end: {\n          line: 83,\n          column: 51\n        }\n      },\n      \"11\": {\n        start: {\n          line: 85,\n          column: 8\n        },\n        end: {\n          line: 85,\n          column: 116\n        }\n      },\n      \"12\": {\n        start: {\n          line: 90,\n          column: 21\n        },\n        end: {\n          line: 90,\n          column: 36\n        }\n      },\n      \"13\": {\n        start: {\n          line: 91,\n          column: 4\n        },\n        end: {\n          line: 100,\n          column: 5\n        }\n      },\n      \"14\": {\n        start: {\n          line: 91,\n          column: 17\n        },\n        end: {\n          line: 91,\n          column: 18\n        }\n      },\n      \"15\": {\n        start: {\n          line: 92,\n          column: 6\n        },\n        end: {\n          line: 99,\n          column: 7\n        }\n      },\n      \"16\": {\n        start: {\n          line: 92,\n          column: 19\n        },\n        end: {\n          line: 92,\n          column: 20\n        }\n      },\n      \"17\": {\n        start: {\n          line: 93,\n          column: 20\n        },\n        end: {\n          line: 93,\n          column: 31\n        }\n      },\n      \"18\": {\n        start: {\n          line: 94,\n          column: 20\n        },\n        end: {\n          line: 94,\n          column: 45\n        }\n      },\n      \"19\": {\n        start: {\n          line: 95,\n          column: 8\n        },\n        end: {\n          line: 97,\n          column: 9\n        }\n      },\n      \"20\": {\n        start: {\n          line: 96,\n          column: 10\n        },\n        end: {\n          line: 96,\n          column: 42\n        }\n      },\n      \"21\": {\n        start: {\n          line: 98,\n          column: 8\n        },\n        end: {\n          line: 98,\n          column: 30\n        }\n      },\n      \"22\": {\n        start: {\n          line: 103,\n          column: 4\n        },\n        end: {\n          line: 107,\n          column: 5\n        }\n      },\n      \"23\": {\n        start: {\n          line: 104,\n          column: 23\n        },\n        end: {\n          line: 104,\n          column: 70\n        }\n      },\n      \"24\": {\n        start: {\n          line: 105,\n          column: 18\n        },\n        end: {\n          line: 105,\n          column: 29\n        }\n      },\n      \"25\": {\n        start: {\n          line: 106,\n          column: 6\n        },\n        end: {\n          line: 106,\n          column: 60\n        }\n      },\n      \"26\": {\n        start: {\n          line: 109,\n          column: 4\n        },\n        end: {\n          line: 113,\n          column: 6\n        }\n      },\n      \"27\": {\n        start: {\n          line: 122,\n          column: 17\n        },\n        end: {\n          line: 122,\n          column: 38\n        }\n      },\n      \"28\": {\n        start: {\n          line: 123,\n          column: 16\n        },\n        end: {\n          line: 123,\n          column: 35\n        }\n      },\n      \"29\": {\n        start: {\n          line: 124,\n          column: 2\n        },\n        end: {\n          line: 126,\n          column: 3\n        }\n      },\n      \"30\": {\n        start: {\n          line: 125,\n          column: 4\n        },\n        end: {\n          line: 125,\n          column: 54\n        }\n      },\n      \"31\": {\n        start: {\n          line: 127,\n          column: 20\n        },\n        end: {\n          line: 127,\n          column: 42\n        }\n      },\n      \"32\": {\n        start: {\n          line: 128,\n          column: 14\n        },\n        end: {\n          line: 128,\n          column: 57\n        }\n      },\n      \"33\": {\n        start: {\n          line: 129,\n          column: 14\n        },\n        end: {\n          line: 129,\n          column: 36\n        }\n      },\n      \"34\": {\n        start: {\n          line: 130,\n          column: 2\n        },\n        end: {\n          line: 134,\n          column: 3\n        }\n      },\n      \"35\": {\n        start: {\n          line: 131,\n          column: 4\n        },\n        end: {\n          line: 131,\n          column: 49\n        }\n      },\n      \"36\": {\n        start: {\n          line: 133,\n          column: 4\n        },\n        end: {\n          line: 133,\n          column: 41\n        }\n      },\n      \"37\": {\n        start: {\n          line: 142,\n          column: 2\n        },\n        end: {\n          line: 148,\n          column: 3\n        }\n      },\n      \"38\": {\n        start: {\n          line: 143,\n          column: 22\n        },\n        end: {\n          line: 143,\n          column: 79\n        }\n      },\n      \"39\": {\n        start: {\n          line: 144,\n          column: 4\n        },\n        end: {\n          line: 144,\n          column: 31\n        }\n      },\n      \"40\": {\n        start: {\n          line: 146,\n          column: 22\n        },\n        end: {\n          line: 146,\n          column: 64\n        }\n      },\n      \"41\": {\n        start: {\n          line: 147,\n          column: 4\n        },\n        end: {\n          line: 147,\n          column: 38\n        }\n      },\n      \"42\": {\n        start: {\n          line: 152,\n          column: 2\n        },\n        end: {\n          line: 154,\n          column: 3\n        }\n      },\n      \"43\": {\n        start: {\n          line: 153,\n          column: 4\n        },\n        end: {\n          line: 153,\n          column: 68\n        }\n      },\n      \"44\": {\n        start: {\n          line: 155,\n          column: 2\n        },\n        end: {\n          line: 155,\n          column: 15\n        }\n      }\n    },\n    fnMap: {\n      \"0\": {\n        name: \"(anonymous_0)\",\n        decl: {\n          start: {\n            line: 72,\n            column: 2\n          },\n          end: {\n            line: 72,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 72,\n            column: 36\n          },\n          end: {\n            line: 75,\n            column: 3\n          }\n        },\n        line: 72\n      },\n      \"1\": {\n        name: \"(anonymous_1)\",\n        decl: {\n          start: {\n            line: 77,\n            column: 2\n          },\n          end: {\n            line: 77,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 77,\n            column: 11\n          },\n          end: {\n            line: 114,\n            column: 3\n          }\n        },\n        line: 77\n      },\n      \"2\": {\n        name: \"(anonymous_2)\",\n        decl: {\n          start: {\n            line: 79,\n            column: 59\n          },\n          end: {\n            line: 79,\n            column: 60\n          }\n        },\n        loc: {\n          start: {\n            line: 79,\n            column: 75\n          },\n          end: {\n            line: 87,\n            column: 5\n          }\n        },\n        line: 79\n      },\n      \"3\": {\n        name: \"algebraicToCartesian\",\n        decl: {\n          start: {\n            line: 121,\n            column: 16\n          },\n          end: {\n            line: 121,\n            column: 36\n          }\n        },\n        loc: {\n          start: {\n            line: 121,\n            column: 71\n          },\n          end: {\n            line: 135,\n            column: 1\n          }\n        },\n        line: 121\n      },\n      \"4\": {\n        name: \"cartesianToAlgebraic\",\n        decl: {\n          start: {\n            line: 141,\n            column: 16\n          },\n          end: {\n            line: 141,\n            column: 36\n          }\n        },\n        loc: {\n          start: {\n            line: 141,\n            column: 77\n          },\n          end: {\n            line: 149,\n            column: 1\n          }\n        },\n        line: 141\n      },\n      \"5\": {\n        name: \"applyInvertion\",\n        decl: {\n          start: {\n            line: 151,\n            column: 16\n          },\n          end: {\n            line: 151,\n            column: 30\n          }\n        },\n        loc: {\n          start: {\n            line: 151,\n            column: 73\n          },\n          end: {\n            line: 156,\n            column: 1\n          }\n        },\n        line: 151\n      }\n    },\n    branchMap: {\n      \"0\": {\n        loc: {\n          start: {\n            line: 80,\n            column: 6\n          },\n          end: {\n            line: 86,\n            column: 7\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 80,\n            column: 6\n          },\n          end: {\n            line: 86,\n            column: 7\n          }\n        }, {\n          start: {\n            line: 80,\n            column: 6\n          },\n          end: {\n            line: 86,\n            column: 7\n          }\n        }],\n        line: 80\n      },\n      \"1\": {\n        loc: {\n          start: {\n            line: 95,\n            column: 8\n          },\n          end: {\n            line: 97,\n            column: 9\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 95,\n            column: 8\n          },\n          end: {\n            line: 97,\n            column: 9\n          }\n        }, {\n          start: {\n            line: 95,\n            column: 8\n          },\n          end: {\n            line: 97,\n            column: 9\n          }\n        }],\n        line: 95\n      },\n      \"2\": {\n        loc: {\n          start: {\n            line: 124,\n            column: 2\n          },\n          end: {\n            line: 126,\n            column: 3\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 124,\n            column: 2\n          },\n          end: {\n            line: 126,\n            column: 3\n          }\n        }, {\n          start: {\n            line: 124,\n            column: 2\n          },\n          end: {\n            line: 126,\n            column: 3\n          }\n        }],\n        line: 124\n      },\n      \"3\": {\n        loc: {\n          start: {\n            line: 130,\n            column: 2\n          },\n          end: {\n            line: 134,\n            column: 3\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 130,\n            column: 2\n          },\n          end: {\n            line: 134,\n            column: 3\n          }\n        }, {\n          start: {\n            line: 130,\n            column: 2\n          },\n          end: {\n            line: 134,\n            column: 3\n          }\n        }],\n        line: 130\n      },\n      \"4\": {\n        loc: {\n          start: {\n            line: 142,\n            column: 2\n          },\n          end: {\n            line: 148,\n            column: 3\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 142,\n            column: 2\n          },\n          end: {\n            line: 148,\n            column: 3\n          }\n        }, {\n          start: {\n            line: 142,\n            column: 2\n          },\n          end: {\n            line: 148,\n            column: 3\n          }\n        }],\n        line: 142\n      },\n      \"5\": {\n        loc: {\n          start: {\n            line: 152,\n            column: 2\n          },\n          end: {\n            line: 154,\n            column: 3\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 152,\n            column: 2\n          },\n          end: {\n            line: 154,\n            column: 3\n          }\n        }, {\n          start: {\n            line: 152,\n            column: 2\n          },\n          end: {\n            line: 154,\n            column: 3\n          }\n        }],\n        line: 152\n      }\n    },\n    s: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0,\n      \"7\": 0,\n      \"8\": 0,\n      \"9\": 0,\n      \"10\": 0,\n      \"11\": 0,\n      \"12\": 0,\n      \"13\": 0,\n      \"14\": 0,\n      \"15\": 0,\n      \"16\": 0,\n      \"17\": 0,\n      \"18\": 0,\n      \"19\": 0,\n      \"20\": 0,\n      \"21\": 0,\n      \"22\": 0,\n      \"23\": 0,\n      \"24\": 0,\n      \"25\": 0,\n      \"26\": 0,\n      \"27\": 0,\n      \"28\": 0,\n      \"29\": 0,\n      \"30\": 0,\n      \"31\": 0,\n      \"32\": 0,\n      \"33\": 0,\n      \"34\": 0,\n      \"35\": 0,\n      \"36\": 0,\n      \"37\": 0,\n      \"38\": 0,\n      \"39\": 0,\n      \"40\": 0,\n      \"41\": 0,\n      \"42\": 0,\n      \"43\": 0,\n      \"44\": 0\n    },\n    f: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0\n    },\n    b: {\n      \"0\": [0, 0],\n      \"1\": [0, 0],\n      \"2\": [0, 0],\n      \"3\": [0, 0],\n      \"4\": [0, 0],\n      \"5\": [0, 0]\n    },\n    _coverageSchema: \"1a1c01bbd47fc00a2c39e90264f33305004495a9\",\n    hash: \"e1aa0d16c3c9ac3dc2fff2925ddbcee354b9e14a\"\n  };\n  var coverage = global[gcv] || (global[gcv] = {});\n\n  if (!coverage[path] || coverage[path].hash !== hash) {\n    coverage[path] = coverageData;\n  }\n\n  var actualCoverage = coverage[path];\n\n  cov_1bki2n93fn = function () {\n    return actualCoverage;\n  };\n\n  return actualCoverage;\n}\n\ncov_1bki2n93fn();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*\n * Copyright 2018 The @freeboardgame.org/boardgame.io Authors.\n *\n * Use of this source code is governed by a MIT-style\n * license that can be found in the LICENSE file or at\n * https://opensource.org/licenses/MIT.\n */\nimport React from 'react';\nimport { Grid } from 'ui';\n/**\n * Checkerboard\n *\n * Component that will show a configurable checker board for games like\n * chess, checkers and others. The vertical columns of squares are labeled\n * with letters from a to z, while the rows are labeled with numbers, starting\n * with 1.\n *\n * Props:\n *   onClick - On Click Callback, (row, col) of the square passed as argument.\n *   primaryColor - Primary color, #d18b47 by default.\n *   secondaryColor - Secondary color, #ffce9e by default.\n *   colorMap - Object of object having cell names as key and colors as values.\n *   Ex: { 'c5': 'red' } colors cells c5 with red.\n *\n * Usage:\n *\n * <Checkerboard>\n *   <Token square={'c5'}>\n *     <Knight color='dark' />\n *   </Token>\n * </Checkerboard>\n */\n\nconst NUM_COLS = (cov_1bki2n93fn().s[0]++, 8);\nconst NUM_ROWS = (cov_1bki2n93fn().s[1]++, 8);\nexport class Checkerboard extends (React.Component) {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"_onClick\", (cov_1bki2n93fn().s[3]++, this.onClick.bind(this)));\n  }\n\n  onClick(coords) {\n    cov_1bki2n93fn().f[0]++;\n    const {\n      x,\n      y\n    } = (cov_1bki2n93fn().s[4]++, coords);\n    cov_1bki2n93fn().s[5]++;\n    this.props.onClick({\n      square: cartesianToAlgebraic(x, y, this.props.invert)\n    });\n  }\n\n  render() {\n    cov_1bki2n93fn().f[1]++;\n    // Convert the square=\"\" prop to x and y.\n    const tokens = (cov_1bki2n93fn().s[6]++, React.Children.map(this.props.children, child => {\n      cov_1bki2n93fn().f[2]++;\n      cov_1bki2n93fn().s[7]++;\n\n      if (child.props.square) {\n        cov_1bki2n93fn().b[0][0]++;\n        const square = (cov_1bki2n93fn().s[8]++, child.props.square);\n        const {\n          x,\n          y\n        } = (cov_1bki2n93fn().s[9]++, algebraicToCartesian(square, this.props.invert));\n        cov_1bki2n93fn().s[10]++;\n        return React.cloneElement(child, {\n          x,\n          y\n        });\n      } else {\n        cov_1bki2n93fn().b[0][1]++;\n        cov_1bki2n93fn().s[11]++;\n        return React.cloneElement(child, applyInvertion({\n          x: child.props.x,\n          y: child.props.y\n        }, this.props.invert));\n      }\n    })); // Build colorMap with checkerboard pattern.\n\n    const colorMap = (cov_1bki2n93fn().s[12]++, {});\n    cov_1bki2n93fn().s[13]++;\n\n    for (let x = (cov_1bki2n93fn().s[14]++, 0); x < NUM_COLS; x++) {\n      cov_1bki2n93fn().s[15]++;\n\n      for (let y = (cov_1bki2n93fn().s[16]++, 0); y < NUM_ROWS; y++) {\n        const key = (cov_1bki2n93fn().s[17]++, `${x},${y}`);\n        let color = (cov_1bki2n93fn().s[18]++, this.props.secondaryColor);\n        cov_1bki2n93fn().s[19]++;\n\n        if ((x + y) % 2 === 0) {\n          cov_1bki2n93fn().b[1][0]++;\n          cov_1bki2n93fn().s[20]++;\n          color = this.props.primaryColor;\n        } else {\n          cov_1bki2n93fn().b[1][1]++;\n        }\n\n        cov_1bki2n93fn().s[21]++;\n        colorMap[key] = color;\n      }\n    } // Add highlighted squares.\n\n\n    cov_1bki2n93fn().s[22]++;\n\n    for (const square of Object.keys(this.props.highlightedSquares)) {\n      const {\n        x,\n        y\n      } = (cov_1bki2n93fn().s[23]++, algebraicToCartesian(square, this.props.invert));\n      const key = (cov_1bki2n93fn().s[24]++, `${x},${y}`);\n      cov_1bki2n93fn().s[25]++;\n      colorMap[key] = this.props.highlightedSquares[square];\n    }\n\n    cov_1bki2n93fn().s[26]++;\n    return __jsx(Grid, {\n      rows: NUM_ROWS,\n      cols: NUM_COLS,\n      style: this.props.style,\n      onClick: this._onClick,\n      colorMap: colorMap\n    }, tokens);\n  }\n\n}\n/**\n * Given an algebraic notation, returns x and y values.\n * Example: A1 returns { x: 0, y: 0 }\n */\n\n_defineProperty(Checkerboard, \"defaultProps\", (cov_1bki2n93fn().s[2]++, {\n  invert: false,\n  primaryColor: '#ffce9e',\n  secondaryColor: '#d18b47',\n  highlightedSquares: {},\n  style: {}\n}));\n\nexport function algebraicToCartesian(square, invert) {\n  cov_1bki2n93fn().f[3]++;\n  const regexp = (cov_1bki2n93fn().s[27]++, /([A-Za-z])([0-9]+)/g);\n  const match = (cov_1bki2n93fn().s[28]++, regexp.exec(square));\n  cov_1bki2n93fn().s[29]++;\n\n  if (match == null) {\n    cov_1bki2n93fn().b[2][0]++;\n    cov_1bki2n93fn().s[30]++;\n    throw Error('Invalid square provided: ' + square);\n  } else {\n    cov_1bki2n93fn().b[2][1]++;\n  }\n\n  const colSymbol = (cov_1bki2n93fn().s[31]++, match[1].toLowerCase());\n  const col = (cov_1bki2n93fn().s[32]++, colSymbol.charCodeAt(0) - 'a'.charCodeAt(0));\n  const row = (cov_1bki2n93fn().s[33]++, parseInt(match[2], 10));\n  cov_1bki2n93fn().s[34]++;\n\n  if (invert) {\n    cov_1bki2n93fn().b[3][0]++;\n    cov_1bki2n93fn().s[35]++;\n    return {\n      x: NUM_COLS - col - 1,\n      y: row - 1\n    };\n  } else {\n    cov_1bki2n93fn().b[3][1]++;\n    cov_1bki2n93fn().s[36]++;\n    return {\n      x: col,\n      y: NUM_ROWS - row\n    };\n  }\n}\n/**\n * Given an x and y values, returns algebraic notation.\n * Example: 0, 0 returns A1\n */\n\nexport function cartesianToAlgebraic(x, y, invert) {\n  cov_1bki2n93fn().f[4]++;\n  cov_1bki2n93fn().s[37]++;\n\n  if (invert) {\n    cov_1bki2n93fn().b[4][0]++;\n    const colSymbol = (cov_1bki2n93fn().s[38]++, String.fromCharCode(NUM_COLS - x - 1 + 'a'.charCodeAt(0)));\n    cov_1bki2n93fn().s[39]++;\n    return colSymbol + (y + 1);\n  } else {\n    cov_1bki2n93fn().b[4][1]++;\n    const colSymbol = (cov_1bki2n93fn().s[40]++, String.fromCharCode(x + 'a'.charCodeAt(0)));\n    cov_1bki2n93fn().s[41]++;\n    return colSymbol + (NUM_ROWS - y);\n  }\n}\nexport function applyInvertion(coord, invert) {\n  cov_1bki2n93fn().f[5]++;\n  cov_1bki2n93fn().s[42]++;\n\n  if (invert) {\n    cov_1bki2n93fn().b[5][0]++;\n    cov_1bki2n93fn().s[43]++;\n    return {\n      x: NUM_COLS - coord.x - 1,\n      y: NUM_ROWS - coord.y - 1\n    };\n  } else {\n    cov_1bki2n93fn().b[5][1]++;\n  }\n\n  cov_1bki2n93fn().s[44]++;\n  return coord;\n}","map":{"version":3,"sources":["/home/j/Documents/FreeBoardGames.org/src/games/common/Checkerboard.tsx"],"names":["React","Grid","NUM_COLS","NUM_ROWS","Checkerboard","Component","onClick","bind","coords","x","y","props","square","cartesianToAlgebraic","invert","render","tokens","Children","map","children","child","algebraicToCartesian","cloneElement","applyInvertion","colorMap","key","color","secondaryColor","primaryColor","Object","keys","highlightedSquares","style","_onClick","regexp","match","exec","Error","colSymbol","toLowerCase","col","charCodeAt","row","parseInt","String","fromCharCode","coord"],"mappings":"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","sourcesContent":["/*\n * Copyright 2018 The @freeboardgame.org/boardgame.io Authors.\n *\n * Use of this source code is governed by a MIT-style\n * license that can be found in the LICENSE file or at\n * https://opensource.org/licenses/MIT.\n */\n\nimport React from 'react';\nimport { Grid } from 'ui';\n\n/**\n * Checkerboard\n *\n * Component that will show a configurable checker board for games like\n * chess, checkers and others. The vertical columns of squares are labeled\n * with letters from a to z, while the rows are labeled with numbers, starting\n * with 1.\n *\n * Props:\n *   onClick - On Click Callback, (row, col) of the square passed as argument.\n *   primaryColor - Primary color, #d18b47 by default.\n *   secondaryColor - Secondary color, #ffce9e by default.\n *   colorMap - Object of object having cell names as key and colors as values.\n *   Ex: { 'c5': 'red' } colors cells c5 with red.\n *\n * Usage:\n *\n * <Checkerboard>\n *   <Token square={'c5'}>\n *     <Knight color='dark' />\n *   </Token>\n * </Checkerboard>\n */\nconst NUM_COLS = 8;\nconst NUM_ROWS = 8;\nexport interface IAlgebraicCoords {\n  square: string;\n}\nexport interface ICartesianCoords {\n  x: number;\n  y: number;\n}\nexport interface IOnDragData {\n  x: number;\n  y: number;\n  originalX: number;\n  originalY: number;\n}\nexport interface IColorMap {\n  [key: string]: string;\n}\ninterface ICheckerboardProps {\n  onClick: (coords: ICartesianCoords) => void;\n  invert: boolean;\n  primaryColor: string;\n  secondaryColor: string;\n  highlightedSquares: IColorMap;\n  style: React.CSSProperties;\n  children?: any;\n}\nexport class Checkerboard extends React.Component<any, any> {\n  static defaultProps = {\n    invert: false,\n    primaryColor: '#ffce9e',\n    secondaryColor: '#d18b47',\n    highlightedSquares: {},\n    style: {},\n  };\n  _onClick = this.onClick.bind(this);\n\n  onClick(coords: ICartesianCoords) {\n    const { x, y } = coords;\n    this.props.onClick({ square: cartesianToAlgebraic(x, y, this.props.invert) });\n  }\n\n  render() {\n    // Convert the square=\"\" prop to x and y.\n    const tokens = React.Children.map(this.props.children, (child: any) => {\n      if (child.props.square) {\n        const square = child.props.square;\n        const { x, y } = algebraicToCartesian(square, this.props.invert);\n        return React.cloneElement(child, { x, y });\n      } else {\n        return React.cloneElement(child, applyInvertion({ x: child.props.x, y: child.props.y }, this.props.invert));\n      }\n    });\n\n    // Build colorMap with checkerboard pattern.\n    const colorMap = {} as IColorMap;\n    for (let x = 0; x < NUM_COLS; x++) {\n      for (let y = 0; y < NUM_ROWS; y++) {\n        const key = `${x},${y}`;\n        let color = this.props.secondaryColor;\n        if ((x + y) % 2 === 0) {\n          color = this.props.primaryColor;\n        }\n        colorMap[key] = color;\n      }\n    }\n\n    // Add highlighted squares.\n    for (const square of Object.keys(this.props.highlightedSquares)) {\n      const { x, y } = algebraicToCartesian(square, this.props.invert);\n      const key = `${x},${y}`;\n      colorMap[key] = this.props.highlightedSquares[square];\n    }\n\n    return (\n      <Grid rows={NUM_ROWS} cols={NUM_COLS} style={this.props.style} onClick={this._onClick} colorMap={colorMap}>\n        {tokens}\n      </Grid>\n    );\n  }\n}\n\n/**\n * Given an algebraic notation, returns x and y values.\n * Example: A1 returns { x: 0, y: 0 }\n */\nexport function algebraicToCartesian(square: string, invert?: boolean) {\n  const regexp = /([A-Za-z])([0-9]+)/g;\n  const match = regexp.exec(square);\n  if (match == null) {\n    throw Error('Invalid square provided: ' + square);\n  }\n  const colSymbol = match[1].toLowerCase();\n  const col = colSymbol.charCodeAt(0) - 'a'.charCodeAt(0);\n  const row = parseInt(match[2], 10);\n  if (invert) {\n    return { x: NUM_COLS - col - 1, y: row - 1 };\n  } else {\n    return { x: col, y: NUM_ROWS - row };\n  }\n}\n\n/**\n * Given an x and y values, returns algebraic notation.\n * Example: 0, 0 returns A1\n */\nexport function cartesianToAlgebraic(x: number, y: number, invert?: boolean) {\n  if (invert) {\n    const colSymbol = String.fromCharCode(NUM_COLS - x - 1 + 'a'.charCodeAt(0));\n    return colSymbol + (y + 1);\n  } else {\n    const colSymbol = String.fromCharCode(x + 'a'.charCodeAt(0));\n    return colSymbol + (NUM_ROWS - y);\n  }\n}\n\nexport function applyInvertion(coord: ICartesianCoords, invert: boolean) {\n  if (invert) {\n    return { x: NUM_COLS - coord.x - 1, y: NUM_ROWS - coord.y - 1 };\n  }\n  return coord;\n}\n"]},"metadata":{},"sourceType":"module"}