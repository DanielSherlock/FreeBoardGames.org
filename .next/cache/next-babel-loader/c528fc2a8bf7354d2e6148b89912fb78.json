{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction cov_2l65tzy772() {\n  var path = \"/home/j/Documents/FreeBoardGames.org/src/games/seabattle/board.tsx\";\n  var hash = \"f455d8a32b860412cc36e8fec6dd7cee81d912c9\";\n  var global = new Function(\"return this\")();\n  var gcv = \"__coverage__\";\n  var coverageData = {\n    path: \"/home/j/Documents/FreeBoardGames.org/src/games/seabattle/board.tsx\",\n    statementMap: {\n      \"0\": {\n        start: {\n          line: 30,\n          column: 4\n        },\n        end: {\n          line: 30,\n          column: 24\n        }\n      },\n      \"1\": {\n        start: {\n          line: 31,\n          column: 4\n        },\n        end: {\n          line: 33,\n          column: 6\n        }\n      },\n      \"2\": {\n        start: {\n          line: 37,\n          column: 16\n        },\n        end: {\n          line: 37,\n          column: 30\n        }\n      },\n      \"3\": {\n        start: {\n          line: 38,\n          column: 4\n        },\n        end: {\n          line: 53,\n          column: 5\n        }\n      },\n      \"4\": {\n        start: {\n          line: 39,\n          column: 21\n        },\n        end: {\n          line: 39,\n          column: 89\n        }\n      },\n      \"5\": {\n        start: {\n          line: 40,\n          column: 21\n        },\n        end: {\n          line: 40,\n          column: 48\n        }\n      },\n      \"6\": {\n        start: {\n          line: 41,\n          column: 26\n        },\n        end: {\n          line: 41,\n          column: 46\n        }\n      },\n      \"7\": {\n        start: {\n          line: 42,\n          column: 31\n        },\n        end: {\n          line: 42,\n          column: 101\n        }\n      },\n      \"8\": {\n        start: {\n          line: 42,\n          column: 77\n        },\n        end: {\n          line: 42,\n          column: 100\n        }\n      },\n      \"9\": {\n        start: {\n          line: 43,\n          column: 29\n        },\n        end: {\n          line: 43,\n          column: 98\n        }\n      },\n      \"10\": {\n        start: {\n          line: 43,\n          column: 70\n        },\n        end: {\n          line: 43,\n          column: 97\n        }\n      },\n      \"11\": {\n        start: {\n          line: 45,\n          column: 8\n        },\n        end: {\n          line: 50,\n          column: 14\n        }\n      },\n      \"12\": {\n        start: {\n          line: 52,\n          column: 6\n        },\n        end: {\n          line: 52,\n          column: 113\n        }\n      },\n      \"13\": {\n        start: {\n          line: 55,\n          column: 4\n        },\n        end: {\n          line: 80,\n          column: 5\n        }\n      },\n      \"14\": {\n        start: {\n          line: 61,\n          column: 6\n        },\n        end: {\n          line: 61,\n          column: 90\n        }\n      },\n      \"15\": {\n        start: {\n          line: 62,\n          column: 11\n        },\n        end: {\n          line: 80,\n          column: 5\n        }\n      },\n      \"16\": {\n        start: {\n          line: 63,\n          column: 6\n        },\n        end: {\n          line: 67,\n          column: 8\n        }\n      },\n      \"17\": {\n        start: {\n          line: 69,\n          column: 6\n        },\n        end: {\n          line: 79,\n          column: 8\n        }\n      },\n      \"18\": {\n        start: {\n          line: 81,\n          column: 4\n        },\n        end: {\n          line: 85,\n          column: 6\n        }\n      },\n      \"19\": {\n        start: {\n          line: 88,\n          column: 18\n        },\n        end: {\n          line: 92,\n          column: 3\n        }\n      },\n      \"20\": {\n        start: {\n          line: 89,\n          column: 4\n        },\n        end: {\n          line: 91,\n          column: 7\n        }\n      },\n      \"21\": {\n        start: {\n          line: 90,\n          column: 6\n        },\n        end: {\n          line: 90,\n          column: 43\n        }\n      },\n      \"22\": {\n        start: {\n          line: 94,\n          column: 21\n        },\n        end: {\n          line: 96,\n          column: 3\n        }\n      },\n      \"23\": {\n        start: {\n          line: 95,\n          column: 4\n        },\n        end: {\n          line: 95,\n          column: 46\n        }\n      },\n      \"24\": {\n        start: {\n          line: 98,\n          column: 18\n        },\n        end: {\n          line: 100,\n          column: 3\n        }\n      },\n      \"25\": {\n        start: {\n          line: 99,\n          column: 4\n        },\n        end: {\n          line: 99,\n          column: 35\n        }\n      },\n      \"26\": {\n        start: {\n          line: 102,\n          column: 25\n        },\n        end: {\n          line: 111,\n          column: 3\n        }\n      },\n      \"27\": {\n        start: {\n          line: 103,\n          column: 25\n        },\n        end: {\n          line: 103,\n          column: 45\n        }\n      },\n      \"28\": {\n        start: {\n          line: 104,\n          column: 25\n        },\n        end: {\n          line: 104,\n          column: 38\n        }\n      },\n      \"29\": {\n        start: {\n          line: 105,\n          column: 34\n        },\n        end: {\n          line: 108,\n          column: 5\n        }\n      },\n      \"30\": {\n        start: {\n          line: 109,\n          column: 20\n        },\n        end: {\n          line: 109,\n          column: 28\n        }\n      },\n      \"31\": {\n        start: {\n          line: 110,\n          column: 4\n        },\n        end: {\n          line: 110,\n          column: 19\n        }\n      },\n      \"32\": {\n        start: {\n          line: 113,\n          column: 14\n        },\n        end: {\n          line: 115,\n          column: 3\n        }\n      },\n      \"33\": {\n        start: {\n          line: 114,\n          column: 4\n        },\n        end: {\n          line: 114,\n          column: 37\n        }\n      }\n    },\n    fnMap: {\n      \"0\": {\n        name: \"(anonymous_0)\",\n        decl: {\n          start: {\n            line: 29,\n            column: 2\n          },\n          end: {\n            line: 29,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 29,\n            column: 54\n          },\n          end: {\n            line: 34,\n            column: 3\n          }\n        },\n        line: 29\n      },\n      \"1\": {\n        name: \"(anonymous_1)\",\n        decl: {\n          start: {\n            line: 36,\n            column: 2\n          },\n          end: {\n            line: 36,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 36,\n            column: 11\n          },\n          end: {\n            line: 86,\n            column: 3\n          }\n        },\n        line: 36\n      },\n      \"2\": {\n        name: \"(anonymous_2)\",\n        decl: {\n          start: {\n            line: 42,\n            column: 58\n          },\n          end: {\n            line: 42,\n            column: 59\n          }\n        },\n        loc: {\n          start: {\n            line: 42,\n            column: 77\n          },\n          end: {\n            line: 42,\n            column: 100\n          }\n        },\n        line: 42\n      },\n      \"3\": {\n        name: \"(anonymous_3)\",\n        decl: {\n          start: {\n            line: 43,\n            column: 55\n          },\n          end: {\n            line: 43,\n            column: 56\n          }\n        },\n        loc: {\n          start: {\n            line: 43,\n            column: 70\n          },\n          end: {\n            line: 43,\n            column: 97\n          }\n        },\n        line: 43\n      },\n      \"4\": {\n        name: \"(anonymous_4)\",\n        decl: {\n          start: {\n            line: 88,\n            column: 18\n          },\n          end: {\n            line: 88,\n            column: 19\n          }\n        },\n        loc: {\n          start: {\n            line: 88,\n            column: 45\n          },\n          end: {\n            line: 92,\n            column: 3\n          }\n        },\n        line: 88\n      },\n      \"5\": {\n        name: \"(anonymous_5)\",\n        decl: {\n          start: {\n            line: 89,\n            column: 18\n          },\n          end: {\n            line: 89,\n            column: 19\n          }\n        },\n        loc: {\n          start: {\n            line: 89,\n            column: 32\n          },\n          end: {\n            line: 91,\n            column: 5\n          }\n        },\n        line: 89\n      },\n      \"6\": {\n        name: \"(anonymous_6)\",\n        decl: {\n          start: {\n            line: 94,\n            column: 21\n          },\n          end: {\n            line: 94,\n            column: 22\n          }\n        },\n        loc: {\n          start: {\n            line: 94,\n            column: 27\n          },\n          end: {\n            line: 96,\n            column: 3\n          }\n        },\n        line: 94\n      },\n      \"7\": {\n        name: \"(anonymous_7)\",\n        decl: {\n          start: {\n            line: 98,\n            column: 18\n          },\n          end: {\n            line: 98,\n            column: 19\n          }\n        },\n        loc: {\n          start: {\n            line: 98,\n            column: 24\n          },\n          end: {\n            line: 100,\n            column: 3\n          }\n        },\n        line: 98\n      },\n      \"8\": {\n        name: \"(anonymous_8)\",\n        decl: {\n          start: {\n            line: 102,\n            column: 25\n          },\n          end: {\n            line: 102,\n            column: 26\n          }\n        },\n        loc: {\n          start: {\n            line: 102,\n            column: 31\n          },\n          end: {\n            line: 111,\n            column: 3\n          }\n        },\n        line: 102\n      },\n      \"9\": {\n        name: \"(anonymous_9)\",\n        decl: {\n          start: {\n            line: 113,\n            column: 14\n          },\n          end: {\n            line: 113,\n            column: 15\n          }\n        },\n        loc: {\n          start: {\n            line: 113,\n            column: 34\n          },\n          end: {\n            line: 115,\n            column: 3\n          }\n        },\n        line: 113\n      }\n    },\n    branchMap: {\n      \"0\": {\n        loc: {\n          start: {\n            line: 38,\n            column: 4\n          },\n          end: {\n            line: 53,\n            column: 5\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 38,\n            column: 4\n          },\n          end: {\n            line: 53,\n            column: 5\n          }\n        }, {\n          start: {\n            line: 38,\n            column: 4\n          },\n          end: {\n            line: 53,\n            column: 5\n          }\n        }],\n        line: 38\n      },\n      \"1\": {\n        loc: {\n          start: {\n            line: 39,\n            column: 21\n          },\n          end: {\n            line: 39,\n            column: 89\n          }\n        },\n        type: \"cond-expr\",\n        locations: [{\n          start: {\n            line: 39,\n            column: 67\n          },\n          end: {\n            line: 39,\n            column: 76\n          }\n        }, {\n          start: {\n            line: 39,\n            column: 79\n          },\n          end: {\n            line: 39,\n            column: 89\n          }\n        }],\n        line: 39\n      },\n      \"2\": {\n        loc: {\n          start: {\n            line: 41,\n            column: 26\n          },\n          end: {\n            line: 41,\n            column: 46\n          }\n        },\n        type: \"cond-expr\",\n        locations: [{\n          start: {\n            line: 41,\n            column: 41\n          },\n          end: {\n            line: 41,\n            column: 42\n          }\n        }, {\n          start: {\n            line: 41,\n            column: 45\n          },\n          end: {\n            line: 41,\n            column: 46\n          }\n        }],\n        line: 41\n      },\n      \"3\": {\n        loc: {\n          start: {\n            line: 55,\n            column: 4\n          },\n          end: {\n            line: 80,\n            column: 5\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 55,\n            column: 4\n          },\n          end: {\n            line: 80,\n            column: 5\n          }\n        }, {\n          start: {\n            line: 55,\n            column: 4\n          },\n          end: {\n            line: 80,\n            column: 5\n          }\n        }],\n        line: 55\n      },\n      \"4\": {\n        loc: {\n          start: {\n            line: 56,\n            column: 6\n          },\n          end: {\n            line: 59,\n            column: 66\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 56,\n            column: 6\n          },\n          end: {\n            line: 56,\n            column: 27\n          }\n        }, {\n          start: {\n            line: 57,\n            column: 6\n          },\n          end: {\n            line: 57,\n            column: 34\n          }\n        }, {\n          start: {\n            line: 58,\n            column: 6\n          },\n          end: {\n            line: 58,\n            column: 32\n          }\n        }, {\n          start: {\n            line: 59,\n            column: 6\n          },\n          end: {\n            line: 59,\n            column: 66\n          }\n        }],\n        line: 56\n      },\n      \"5\": {\n        loc: {\n          start: {\n            line: 62,\n            column: 11\n          },\n          end: {\n            line: 80,\n            column: 5\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 62,\n            column: 11\n          },\n          end: {\n            line: 80,\n            column: 5\n          }\n        }, {\n          start: {\n            line: 62,\n            column: 11\n          },\n          end: {\n            line: 80,\n            column: 5\n          }\n        }],\n        line: 62\n      },\n      \"6\": {\n        loc: {\n          start: {\n            line: 107,\n            column: 15\n          },\n          end: {\n            line: 107,\n            column: 50\n          }\n        },\n        type: \"cond-expr\",\n        locations: [{\n          start: {\n            line: 107,\n            column: 30\n          },\n          end: {\n            line: 107,\n            column: 38\n          }\n        }, {\n          start: {\n            line: 107,\n            column: 41\n          },\n          end: {\n            line: 107,\n            column: 50\n          }\n        }],\n        line: 107\n      }\n    },\n    s: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0,\n      \"7\": 0,\n      \"8\": 0,\n      \"9\": 0,\n      \"10\": 0,\n      \"11\": 0,\n      \"12\": 0,\n      \"13\": 0,\n      \"14\": 0,\n      \"15\": 0,\n      \"16\": 0,\n      \"17\": 0,\n      \"18\": 0,\n      \"19\": 0,\n      \"20\": 0,\n      \"21\": 0,\n      \"22\": 0,\n      \"23\": 0,\n      \"24\": 0,\n      \"25\": 0,\n      \"26\": 0,\n      \"27\": 0,\n      \"28\": 0,\n      \"29\": 0,\n      \"30\": 0,\n      \"31\": 0,\n      \"32\": 0,\n      \"33\": 0\n    },\n    f: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0,\n      \"7\": 0,\n      \"8\": 0,\n      \"9\": 0\n    },\n    b: {\n      \"0\": [0, 0],\n      \"1\": [0, 0],\n      \"2\": [0, 0],\n      \"3\": [0, 0],\n      \"4\": [0, 0, 0, 0],\n      \"5\": [0, 0],\n      \"6\": [0, 0]\n    },\n    _coverageSchema: \"1a1c01bbd47fc00a2c39e90264f33305004495a9\",\n    hash: \"f455d8a32b860412cc36e8fec6dd7cee81d912c9\"\n  };\n  var coverage = global[gcv] || (global[gcv] = {});\n\n  if (!coverage[path] || coverage[path].hash !== hash) {\n    coverage[path] = coverageData;\n  }\n\n  var actualCoverage = coverage[path];\n\n  cov_2l65tzy772 = function () {\n    return actualCoverage;\n  };\n\n  return actualCoverage;\n}\n\ncov_2l65tzy772();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { ShipsPlacement } from './ShipsPlacement';\nimport { GameLayout } from 'components/App/Game/GameLayout';\nimport { Battle } from './Battle';\nimport { Radar } from './Radar';\nimport Typography from '@material-ui/core/Typography';\nimport { isAIGame } from 'games/common/gameMode';\nexport var Board = /*#__PURE__*/function (_React$Component) {\n  _inherits(Board, _React$Component);\n\n  var _super = _createSuper(Board);\n\n  function Board(props, state) {\n    var _this;\n\n    _classCallCheck(this, Board);\n\n    cov_2l65tzy772().f[0]++;\n    cov_2l65tzy772().s[0]++;\n    _this = _super.call(this, props, state);\n\n    _defineProperty(_assertThisInitialized(_this), \"_setSoundPref\", (cov_2l65tzy772().s[19]++, function (soundEnabled) {\n      cov_2l65tzy772().f[4]++;\n      cov_2l65tzy772().s[20]++;\n\n      _this.setState(function (oldState) {\n        cov_2l65tzy772().f[5]++;\n        cov_2l65tzy772().s[21]++;\n        return _objectSpread({}, oldState, {\n          soundEnabled: soundEnabled\n        });\n      });\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"_toggleSoundPref\", (cov_2l65tzy772().s[22]++, function () {\n      cov_2l65tzy772().f[6]++;\n      cov_2l65tzy772().s[23]++;\n\n      _this._setSoundPref(!_this._getSoundPref());\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"_getSoundPref\", (cov_2l65tzy772().s[24]++, function () {\n      cov_2l65tzy772().f[7]++;\n      cov_2l65tzy772().s[25]++;\n      return _this.state.soundEnabled;\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"_getOptionsMenuItems\", (cov_2l65tzy772().s[26]++, function () {\n      cov_2l65tzy772().f[8]++;\n      var curSoundPref = (cov_2l65tzy772().s[27]++, _this._getSoundPref());\n      var newSoundPref = (cov_2l65tzy772().s[28]++, !curSoundPref);\n      var option = (cov_2l65tzy772().s[29]++, {\n        onClick: _this._toggleSoundPref,\n        text: \"\".concat(newSoundPref ? (cov_2l65tzy772().b[6][0]++, 'Enable') : (cov_2l65tzy772().b[6][1]++, 'Disable'), \" sound\")\n      });\n      var options = (cov_2l65tzy772().s[30]++, [option]);\n      cov_2l65tzy772().s[31]++;\n      return options;\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"_setShips\", (cov_2l65tzy772().s[32]++, function (ships) {\n      cov_2l65tzy772().f[9]++;\n      cov_2l65tzy772().s[33]++;\n\n      _this.props.moves.setShips(ships);\n    }));\n\n    cov_2l65tzy772().s[1]++;\n    _this.state = {\n      soundEnabled: true\n    };\n    return _this;\n  }\n\n  _createClass(Board, [{\n    key: \"render\",\n    value: function render() {\n      cov_2l65tzy772().f[1]++;\n      var ctx = (cov_2l65tzy772().s[2]++, this.props.ctx);\n      cov_2l65tzy772().s[3]++;\n\n      if (ctx.gameover) {\n        cov_2l65tzy772().b[0][0]++;\n        var result = (cov_2l65tzy772().s[4]++, ctx.gameover.winner === this.props.playerID ? (cov_2l65tzy772().b[1][0]++, 'you won') : (cov_2l65tzy772().b[1][1]++, 'you lost'));\n        var player = (cov_2l65tzy772().s[5]++, Number(this.props.playerID));\n        var otherPlayer = (cov_2l65tzy772().s[6]++, player === 0 ? (cov_2l65tzy772().b[2][0]++, 1) : (cov_2l65tzy772().b[2][1]++, 0));\n        var salvos = (cov_2l65tzy772().s[7]++, this.props.G.salvos.filter(function (salvo) {\n          cov_2l65tzy772().f[2]++;\n          cov_2l65tzy772().s[8]++;\n          return salvo.player === player;\n        }));\n        var ships = (cov_2l65tzy772().s[9]++, this.props.G.ships.filter(function (ship) {\n          cov_2l65tzy772().f[3]++;\n          cov_2l65tzy772().s[10]++;\n          return ship.player === otherPlayer;\n        }));\n        var extraCardContent = (cov_2l65tzy772().s[11]++, __jsx(\"div\", null, __jsx(Typography, {\n          variant: \"h6\",\n          align: \"center\",\n          style: {\n            marginTop: '0px',\n            marginBottom: '16px'\n          }\n        }, \"Your Opponent's Board\"), __jsx(Radar, {\n          player: player,\n          ships: ships,\n          salvos: salvos,\n          editable: false\n        })));\n        cov_2l65tzy772().s[12]++;\n        return __jsx(GameLayout, {\n          gameOver: result,\n          extraCardContent: extraCardContent,\n          gameArgs: this.props.gameArgs\n        });\n      } else {\n        cov_2l65tzy772().b[0][1]++;\n      }\n\n      var child;\n      cov_2l65tzy772().s[13]++;\n\n      if ((cov_2l65tzy772().b[4][0]++, ctx.phase === 'setup') && (cov_2l65tzy772().b[4][1]++, this.props.playerID !== null) && (cov_2l65tzy772().b[4][2]++, ctx.activePlayers !== null) && (cov_2l65tzy772().b[4][3]++, Object.keys(ctx.activePlayers).includes(this.props.playerID))) {\n        cov_2l65tzy772().b[3][0]++;\n        cov_2l65tzy772().s[14]++;\n        child = __jsx(ShipsPlacement, {\n          playerID: this.props.playerID,\n          setShips: this._setShips\n        });\n      } else {\n        cov_2l65tzy772().b[3][1]++;\n        cov_2l65tzy772().s[15]++;\n\n        if (ctx.phase === 'setup') {\n          cov_2l65tzy772().b[5][0]++;\n          cov_2l65tzy772().s[16]++;\n          child = __jsx(Typography, {\n            variant: \"h4\",\n            style: {\n              color: 'white'\n            }\n          }, \"Waiting for opponent...\");\n        } else {\n          cov_2l65tzy772().b[5][1]++;\n          cov_2l65tzy772().s[17]++;\n          child = __jsx(Battle, {\n            ctx: ctx,\n            G: this.props.G,\n            moves: this.props.moves,\n            playerID: this.props.playerID,\n            currentPlayer: ctx.currentPlayer,\n            isAIGame: isAIGame(this.props.gameArgs),\n            getSoundPref: this._getSoundPref\n          });\n        }\n      }\n\n      cov_2l65tzy772().s[18]++;\n      return __jsx(GameLayout, {\n        optionsMenuItems: this._getOptionsMenuItems,\n        gameArgs: this.props.gameArgs\n      }, child);\n    }\n  }]);\n\n  return Board;\n}((React.Component));","map":{"version":3,"sources":["/home/j/Documents/FreeBoardGames.org/src/games/seabattle/board.tsx"],"names":["React","ShipsPlacement","GameLayout","Battle","Radar","Typography","isAIGame","Board","props","state","soundEnabled","setState","oldState","_setSoundPref","_getSoundPref","curSoundPref","newSoundPref","option","onClick","_toggleSoundPref","text","options","ships","moves","setShips","ctx","gameover","result","winner","playerID","player","Number","otherPlayer","salvos","G","filter","salvo","ship","extraCardContent","marginTop","marginBottom","gameArgs","child","phase","activePlayers","Object","keys","includes","_setShips","color","currentPlayer","_getOptionsMenuItems","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { ShipsPlacement } from './ShipsPlacement';\nimport { IGameArgs } from 'components/App/Game/GameBoardWrapper';\nimport { GameLayout } from 'components/App/Game/GameLayout';\nimport { ISalvo, IShip } from './game';\nimport { Battle } from './Battle';\nimport { Radar } from './Radar';\nimport Typography from '@material-ui/core/Typography';\nimport { IOptionsItems } from 'components/App/Game/GameDarkSublayout';\nimport { isAIGame } from 'games/common/gameMode';\n\ninterface IBoardProps {\n  G: any;\n  ctx: any;\n  moves: any;\n  playerID: string;\n  isActive: boolean;\n  isConnected: boolean;\n  gameArgs?: IGameArgs;\n  step?: any;\n}\n\ninterface IBoardState {\n  soundEnabled: boolean;\n}\n\nexport class Board extends React.Component<IBoardProps, IBoardState> {\n  constructor(props: IBoardProps, state: IBoardState) {\n    super(props, state);\n    this.state = {\n      soundEnabled: true,\n    };\n  }\n\n  render() {\n    const ctx = this.props.ctx;\n    if (ctx.gameover) {\n      const result = ctx.gameover.winner === this.props.playerID ? 'you won' : 'you lost';\n      const player = Number(this.props.playerID);\n      const otherPlayer = player === 0 ? 1 : 0;\n      const salvos: ISalvo[] = this.props.G.salvos.filter((salvo: ISalvo) => salvo.player === player);\n      const ships: IShip[] = this.props.G.ships.filter((ship: any) => ship.player === otherPlayer);\n      const extraCardContent = (\n        <div>\n          <Typography variant=\"h6\" align=\"center\" style={{ marginTop: '0px', marginBottom: '16px' }}>\n            Your Opponent&apos;s Board\n          </Typography>\n          <Radar player={player} ships={ships} salvos={salvos} editable={false} />\n        </div>\n      );\n      return <GameLayout gameOver={result} extraCardContent={extraCardContent} gameArgs={this.props.gameArgs} />;\n    }\n    let child;\n    if (\n      ctx.phase === 'setup' &&\n      this.props.playerID !== null &&\n      ctx.activePlayers !== null &&\n      Object.keys(ctx.activePlayers).includes(this.props.playerID)\n    ) {\n      child = <ShipsPlacement playerID={this.props.playerID} setShips={this._setShips} />;\n    } else if (ctx.phase === 'setup') {\n      child = (\n        <Typography variant=\"h4\" style={{ color: 'white' }}>\n          Waiting for opponent...\n        </Typography>\n      );\n    } else {\n      child = (\n        <Battle\n          ctx={ctx}\n          G={this.props.G}\n          moves={this.props.moves}\n          playerID={this.props.playerID}\n          currentPlayer={ctx.currentPlayer}\n          isAIGame={isAIGame(this.props.gameArgs)}\n          getSoundPref={this._getSoundPref}\n        />\n      );\n    }\n    return (\n      <GameLayout optionsMenuItems={this._getOptionsMenuItems} gameArgs={this.props.gameArgs}>\n        {child}\n      </GameLayout>\n    );\n  }\n\n  _setSoundPref = (soundEnabled: boolean) => {\n    this.setState((oldState) => {\n      return { ...oldState, soundEnabled };\n    });\n  };\n\n  _toggleSoundPref = () => {\n    this._setSoundPref(!this._getSoundPref());\n  };\n\n  _getSoundPref = () => {\n    return this.state.soundEnabled;\n  };\n\n  _getOptionsMenuItems = () => {\n    const curSoundPref = this._getSoundPref();\n    const newSoundPref = !curSoundPref;\n    const option: IOptionsItems = {\n      onClick: this._toggleSoundPref,\n      text: `${newSoundPref ? 'Enable' : 'Disable'} sound`,\n    };\n    const options = [option];\n    return options;\n  };\n\n  _setShips = (ships: IShip[]) => {\n    this.props.moves.setShips(ships);\n  };\n}\n"]},"metadata":{},"sourceType":"module"}