{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar __jsx = React.createElement;\n\nfunction cov_2geif4paxx() {\n  var path = \"/home/j/Documents/FreeBoardGames.org/src/ui/3d/grid.js\";\n  var hash = \"60be24e60e690085488ca621dcf8c5e69c1f2bb4\";\n  var global = new Function(\"return this\")();\n  var gcv = \"__coverage__\";\n  var coverageData = {\n    path: \"/home/j/Documents/FreeBoardGames.org/src/ui/3d/grid.js\",\n    statementMap: {\n      \"0\": {\n        start: {\n          line: 39,\n          column: 20\n        },\n        end: {\n          line: 41,\n          column: 1\n        }\n      },\n      \"1\": {\n        start: {\n          line: 40,\n          column: 2\n        },\n        end: {\n          line: 40,\n          column: 99\n        }\n      },\n      \"2\": {\n        start: {\n          line: 40,\n          column: 36\n        },\n        end: {\n          line: 40,\n          column: 77\n        }\n      },\n      \"3\": {\n        start: {\n          line: 44,\n          column: 21\n        },\n        end: {\n          line: 56,\n          column: 3\n        }\n      },\n      \"4\": {\n        start: {\n          line: 57,\n          column: 24\n        },\n        end: {\n          line: 62,\n          column: 3\n        }\n      },\n      \"5\": {\n        start: {\n          line: 65,\n          column: 4\n        },\n        end: {\n          line: 65,\n          column: 17\n        }\n      },\n      \"6\": {\n        start: {\n          line: 66,\n          column: 4\n        },\n        end: {\n          line: 66,\n          column: 40\n        }\n      },\n      \"7\": {\n        start: {\n          line: 67,\n          column: 4\n        },\n        end: {\n          line: 67,\n          column: 40\n        }\n      },\n      \"8\": {\n        start: {\n          line: 68,\n          column: 4\n        },\n        end: {\n          line: 68,\n          column: 41\n        }\n      },\n      \"9\": {\n        start: {\n          line: 70,\n          column: 4\n        },\n        end: {\n          line: 70,\n          column: 106\n        }\n      },\n      \"10\": {\n        start: {\n          line: 71,\n          column: 4\n        },\n        end: {\n          line: 71,\n          column: 106\n        }\n      },\n      \"11\": {\n        start: {\n          line: 75,\n          column: 16\n        },\n        end: {\n          line: 75,\n          column: 27\n        }\n      },\n      \"12\": {\n        start: {\n          line: 76,\n          column: 16\n        },\n        end: {\n          line: 76,\n          column: 25\n        }\n      },\n      \"13\": {\n        start: {\n          line: 77,\n          column: 4\n        },\n        end: {\n          line: 79,\n          column: 5\n        }\n      },\n      \"14\": {\n        start: {\n          line: 78,\n          column: 6\n        },\n        end: {\n          line: 78,\n          column: 39\n        }\n      },\n      \"15\": {\n        start: {\n          line: 80,\n          column: 4\n        },\n        end: {\n          line: 80,\n          column: 17\n        }\n      },\n      \"16\": {\n        start: {\n          line: 84,\n          column: 4\n        },\n        end: {\n          line: 84,\n          column: 41\n        }\n      },\n      \"17\": {\n        start: {\n          line: 88,\n          column: 4\n        },\n        end: {\n          line: 88,\n          column: 38\n        }\n      },\n      \"18\": {\n        start: {\n          line: 89,\n          column: 4\n        },\n        end: {\n          line: 89,\n          column: 38\n        }\n      },\n      \"19\": {\n        start: {\n          line: 92,\n          column: 4\n        },\n        end: {\n          line: 92,\n          column: 45\n        }\n      },\n      \"20\": {\n        start: {\n          line: 93,\n          column: 4\n        },\n        end: {\n          line: 93,\n          column: 41\n        }\n      },\n      \"21\": {\n        start: {\n          line: 94,\n          column: 4\n        },\n        end: {\n          line: 94,\n          column: 42\n        }\n      },\n      \"22\": {\n        start: {\n          line: 97,\n          column: 4\n        },\n        end: {\n          line: 123,\n          column: 5\n        }\n      },\n      \"23\": {\n        start: {\n          line: 97,\n          column: 17\n        },\n        end: {\n          line: 97,\n          column: 18\n        }\n      },\n      \"24\": {\n        start: {\n          line: 98,\n          column: 6\n        },\n        end: {\n          line: 122,\n          column: 7\n        }\n      },\n      \"25\": {\n        start: {\n          line: 98,\n          column: 19\n        },\n        end: {\n          line: 98,\n          column: 20\n        }\n      },\n      \"26\": {\n        start: {\n          line: 99,\n          column: 28\n        },\n        end: {\n          line: 106,\n          column: 9\n        }\n      },\n      \"27\": {\n        start: {\n          line: 108,\n          column: 23\n        },\n        end: {\n          line: 108,\n          column: 46\n        }\n      },\n      \"28\": {\n        start: {\n          line: 109,\n          column: 8\n        },\n        end: {\n          line: 109,\n          column: 37\n        }\n      },\n      \"29\": {\n        start: {\n          line: 111,\n          column: 24\n        },\n        end: {\n          line: 119,\n          column: 9\n        }\n      },\n      \"30\": {\n        start: {\n          line: 112,\n          column: 10\n        },\n        end: {\n          line: 118,\n          column: 11\n        }\n      },\n      \"31\": {\n        start: {\n          line: 113,\n          column: 12\n        },\n        end: {\n          line: 113,\n          column: 71\n        }\n      },\n      \"32\": {\n        start: {\n          line: 113,\n          column: 36\n        },\n        end: {\n          line: 113,\n          column: 71\n        }\n      },\n      \"33\": {\n        start: {\n          line: 114,\n          column: 17\n        },\n        end: {\n          line: 118,\n          column: 11\n        }\n      },\n      \"34\": {\n        start: {\n          line: 115,\n          column: 12\n        },\n        end: {\n          line: 115,\n          column: 79\n        }\n      },\n      \"35\": {\n        start: {\n          line: 115,\n          column: 40\n        },\n        end: {\n          line: 115,\n          column: 79\n        }\n      },\n      \"36\": {\n        start: {\n          line: 116,\n          column: 17\n        },\n        end: {\n          line: 118,\n          column: 11\n        }\n      },\n      \"37\": {\n        start: {\n          line: 117,\n          column: 12\n        },\n        end: {\n          line: 117,\n          column: 77\n        }\n      },\n      \"38\": {\n        start: {\n          line: 117,\n          column: 39\n        },\n        end: {\n          line: 117,\n          column: 77\n        }\n      },\n      \"39\": {\n        start: {\n          line: 121,\n          column: 8\n        },\n        end: {\n          line: 121,\n          column: 46\n        }\n      },\n      \"40\": {\n        start: {\n          line: 126,\n          column: 19\n        },\n        end: {\n          line: 134,\n          column: 6\n        }\n      },\n      \"41\": {\n        start: {\n          line: 127,\n          column: 6\n        },\n        end: {\n          line: 133,\n          column: 9\n        }\n      },\n      \"42\": {\n        start: {\n          line: 136,\n          column: 4\n        },\n        end: {\n          line: 138,\n          column: 5\n        }\n      },\n      \"43\": {\n        start: {\n          line: 137,\n          column: 6\n        },\n        end: {\n          line: 137,\n          column: 20\n        }\n      },\n      \"44\": {\n        start: {\n          line: 140,\n          column: 4\n        },\n        end: {\n          line: 140,\n          column: 16\n        }\n      },\n      \"45\": {\n        start: {\n          line: 162,\n          column: 4\n        },\n        end: {\n          line: 162,\n          column: 12\n        }\n      },\n      \"46\": {\n        start: {\n          line: 163,\n          column: 4\n        },\n        end: {\n          line: 167,\n          column: 6\n        }\n      },\n      \"47\": {\n        start: {\n          line: 168,\n          column: 4\n        },\n        end: {\n          line: 168,\n          column: 26\n        }\n      },\n      \"48\": {\n        start: {\n          line: 169,\n          column: 4\n        },\n        end: {\n          line: 169,\n          column: 89\n        }\n      },\n      \"49\": {\n        start: {\n          line: 170,\n          column: 4\n        },\n        end: {\n          line: 170,\n          column: 74\n        }\n      },\n      \"50\": {\n        start: {\n          line: 172,\n          column: 4\n        },\n        end: {\n          line: 172,\n          column: 30\n        }\n      },\n      \"51\": {\n        start: {\n          line: 173,\n          column: 4\n        },\n        end: {\n          line: 173,\n          column: 68\n        }\n      },\n      \"52\": {\n        start: {\n          line: 174,\n          column: 4\n        },\n        end: {\n          line: 174,\n          column: 68\n        }\n      },\n      \"53\": {\n        start: {\n          line: 175,\n          column: 4\n        },\n        end: {\n          line: 175,\n          column: 49\n        }\n      }\n    },\n    fnMap: {\n      \"0\": {\n        name: \"(anonymous_0)\",\n        decl: {\n          start: {\n            line: 39,\n            column: 20\n          },\n          end: {\n            line: 39,\n            column: 21\n          }\n        },\n        loc: {\n          start: {\n            line: 40,\n            column: 2\n          },\n          end: {\n            line: 40,\n            column: 99\n          }\n        },\n        line: 40\n      },\n      \"1\": {\n        name: \"(anonymous_1)\",\n        decl: {\n          start: {\n            line: 40,\n            column: 23\n          },\n          end: {\n            line: 40,\n            column: 24\n          }\n        },\n        loc: {\n          start: {\n            line: 40,\n            column: 36\n          },\n          end: {\n            line: 40,\n            column: 77\n          }\n        },\n        line: 40\n      },\n      \"2\": {\n        name: \"(anonymous_2)\",\n        decl: {\n          start: {\n            line: 64,\n            column: 2\n          },\n          end: {\n            line: 64,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 64,\n            column: 21\n          },\n          end: {\n            line: 72,\n            column: 3\n          }\n        },\n        line: 64\n      },\n      \"3\": {\n        name: \"(anonymous_3)\",\n        decl: {\n          start: {\n            line: 74,\n            column: 2\n          },\n          end: {\n            line: 74,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 74,\n            column: 22\n          },\n          end: {\n            line: 81,\n            column: 3\n          }\n        },\n        line: 74\n      },\n      \"4\": {\n        name: \"(anonymous_4)\",\n        decl: {\n          start: {\n            line: 83,\n            column: 2\n          },\n          end: {\n            line: 83,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 83,\n            column: 25\n          },\n          end: {\n            line: 85,\n            column: 3\n          }\n        },\n        line: 83\n      },\n      \"5\": {\n        name: \"(anonymous_5)\",\n        decl: {\n          start: {\n            line: 87,\n            column: 2\n          },\n          end: {\n            line: 87,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 87,\n            column: 11\n          },\n          end: {\n            line: 141,\n            column: 3\n          }\n        },\n        line: 87\n      },\n      \"6\": {\n        name: \"(anonymous_6)\",\n        decl: {\n          start: {\n            line: 111,\n            column: 24\n          },\n          end: {\n            line: 111,\n            column: 25\n          }\n        },\n        loc: {\n          start: {\n            line: 111,\n            column: 31\n          },\n          end: {\n            line: 119,\n            column: 9\n          }\n        },\n        line: 111\n      },\n      \"7\": {\n        name: \"(anonymous_7)\",\n        decl: {\n          start: {\n            line: 126,\n            column: 59\n          },\n          end: {\n            line: 126,\n            column: 60\n          }\n        },\n        loc: {\n          start: {\n            line: 126,\n            column: 70\n          },\n          end: {\n            line: 134,\n            column: 5\n          }\n        },\n        line: 126\n      },\n      \"8\": {\n        name: \"(anonymous_8)\",\n        decl: {\n          start: {\n            line: 161,\n            column: 2\n          },\n          end: {\n            line: 161,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 161,\n            column: 21\n          },\n          end: {\n            line: 176,\n            column: 3\n          }\n        },\n        line: 161\n      }\n    },\n    branchMap: {\n      \"0\": {\n        loc: {\n          start: {\n            line: 77,\n            column: 4\n          },\n          end: {\n            line: 79,\n            column: 5\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 77,\n            column: 4\n          },\n          end: {\n            line: 79,\n            column: 5\n          }\n        }, {\n          start: {\n            line: 77,\n            column: 4\n          },\n          end: {\n            line: 79,\n            column: 5\n          }\n        }],\n        line: 77\n      },\n      \"1\": {\n        loc: {\n          start: {\n            line: 112,\n            column: 10\n          },\n          end: {\n            line: 118,\n            column: 11\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 112,\n            column: 10\n          },\n          end: {\n            line: 118,\n            column: 11\n          }\n        }, {\n          start: {\n            line: 112,\n            column: 10\n          },\n          end: {\n            line: 118,\n            column: 11\n          }\n        }],\n        line: 112\n      },\n      \"2\": {\n        loc: {\n          start: {\n            line: 113,\n            column: 12\n          },\n          end: {\n            line: 113,\n            column: 71\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 113,\n            column: 12\n          },\n          end: {\n            line: 113,\n            column: 71\n          }\n        }, {\n          start: {\n            line: 113,\n            column: 12\n          },\n          end: {\n            line: 113,\n            column: 71\n          }\n        }],\n        line: 113\n      },\n      \"3\": {\n        loc: {\n          start: {\n            line: 114,\n            column: 17\n          },\n          end: {\n            line: 118,\n            column: 11\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 114,\n            column: 17\n          },\n          end: {\n            line: 118,\n            column: 11\n          }\n        }, {\n          start: {\n            line: 114,\n            column: 17\n          },\n          end: {\n            line: 118,\n            column: 11\n          }\n        }],\n        line: 114\n      },\n      \"4\": {\n        loc: {\n          start: {\n            line: 115,\n            column: 12\n          },\n          end: {\n            line: 115,\n            column: 79\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 115,\n            column: 12\n          },\n          end: {\n            line: 115,\n            column: 79\n          }\n        }, {\n          start: {\n            line: 115,\n            column: 12\n          },\n          end: {\n            line: 115,\n            column: 79\n          }\n        }],\n        line: 115\n      },\n      \"5\": {\n        loc: {\n          start: {\n            line: 116,\n            column: 17\n          },\n          end: {\n            line: 118,\n            column: 11\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 116,\n            column: 17\n          },\n          end: {\n            line: 118,\n            column: 11\n          }\n        }, {\n          start: {\n            line: 116,\n            column: 17\n          },\n          end: {\n            line: 118,\n            column: 11\n          }\n        }],\n        line: 116\n      },\n      \"6\": {\n        loc: {\n          start: {\n            line: 117,\n            column: 12\n          },\n          end: {\n            line: 117,\n            column: 77\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 117,\n            column: 12\n          },\n          end: {\n            line: 117,\n            column: 77\n          }\n        }, {\n          start: {\n            line: 117,\n            column: 12\n          },\n          end: {\n            line: 117,\n            column: 77\n          }\n        }],\n        line: 117\n      },\n      \"7\": {\n        loc: {\n          start: {\n            line: 136,\n            column: 4\n          },\n          end: {\n            line: 138,\n            column: 5\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 136,\n            column: 4\n          },\n          end: {\n            line: 138,\n            column: 5\n          }\n        }, {\n          start: {\n            line: 136,\n            column: 4\n          },\n          end: {\n            line: 138,\n            column: 5\n          }\n        }],\n        line: 136\n      }\n    },\n    s: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0,\n      \"7\": 0,\n      \"8\": 0,\n      \"9\": 0,\n      \"10\": 0,\n      \"11\": 0,\n      \"12\": 0,\n      \"13\": 0,\n      \"14\": 0,\n      \"15\": 0,\n      \"16\": 0,\n      \"17\": 0,\n      \"18\": 0,\n      \"19\": 0,\n      \"20\": 0,\n      \"21\": 0,\n      \"22\": 0,\n      \"23\": 0,\n      \"24\": 0,\n      \"25\": 0,\n      \"26\": 0,\n      \"27\": 0,\n      \"28\": 0,\n      \"29\": 0,\n      \"30\": 0,\n      \"31\": 0,\n      \"32\": 0,\n      \"33\": 0,\n      \"34\": 0,\n      \"35\": 0,\n      \"36\": 0,\n      \"37\": 0,\n      \"38\": 0,\n      \"39\": 0,\n      \"40\": 0,\n      \"41\": 0,\n      \"42\": 0,\n      \"43\": 0,\n      \"44\": 0,\n      \"45\": 0,\n      \"46\": 0,\n      \"47\": 0,\n      \"48\": 0,\n      \"49\": 0,\n      \"50\": 0,\n      \"51\": 0,\n      \"52\": 0,\n      \"53\": 0\n    },\n    f: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0,\n      \"7\": 0,\n      \"8\": 0\n    },\n    b: {\n      \"0\": [0, 0],\n      \"1\": [0, 0],\n      \"2\": [0, 0],\n      \"3\": [0, 0],\n      \"4\": [0, 0],\n      \"5\": [0, 0],\n      \"6\": [0, 0],\n      \"7\": [0, 0]\n    },\n    _coverageSchema: \"1a1c01bbd47fc00a2c39e90264f33305004495a9\",\n    hash: \"60be24e60e690085488ca621dcf8c5e69c1f2bb4\"\n  };\n  var coverage = global[gcv] || (global[gcv] = {});\n\n  if (!coverage[path] || coverage[path].hash !== hash) {\n    coverage[path] = coverageData;\n  }\n\n  var actualCoverage = coverage[path];\n\n  cov_2geif4paxx = function () {\n    return actualCoverage;\n  };\n\n  return actualCoverage;\n}\n\ncov_2geif4paxx();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\n * Copyright 2018 The boardgame.io Authors\n *\n * Use of this source code is governed by a MIT-style\n * license that can be found in the LICENSE file or at\n * https://opensource.org/licenses/MIT.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport UIContext from '../ui-context';\nimport * as THREE from 'three';\n/**\n * Grid\n *\n * Component that will show children on a cartesian regular grid.\n *\n * Props:\n *   rows       - Number of rows (height) of the grid.\n *   cols       - Number of columns (width) of the grid.\n *   cellSize   - Size of a square.\n *   thichness  - Thichness of a square.\n *   padding    - Padding between squares.\n *   colorMap   - A map from 'x,y' => color.\n *   onClick    - (x, y) => {}\n *                Called when a square is clicked.\n *   onMouseOver    - (x, y) => {}\n *                Called when a square is mouse over.\n *   onMouseOut    - (x, y) => {}\n *                Called when a square is mouse out.\n *\n * Usage:\n *\n * <Grid rows={8} cols={8}>\n *   <Token x={1} y={2}/>\n * </Grid>\n */\n\ncov_2geif4paxx().s[0]++;\nexport var Grid = function Grid(props) {\n  cov_2geif4paxx().f[0]++;\n  cov_2geif4paxx().s[1]++;\n  return __jsx(UIContext.Consumer, null, function (context) {\n    cov_2geif4paxx().f[1]++;\n    cov_2geif4paxx().s[2]++;\n    return __jsx(GridImpl, _extends({}, props, {\n      context: context\n    }));\n  });\n};\n\nvar GridImpl = /*#__PURE__*/function (_React$Component) {\n  _inherits(GridImpl, _React$Component);\n\n  var _super = _createSuper(GridImpl);\n\n  function GridImpl(props) {\n    var _this;\n\n    _classCallCheck(this, GridImpl);\n\n    cov_2geif4paxx().f[2]++;\n    cov_2geif4paxx().s[5]++;\n    _this = _super.call(this, props);\n    cov_2geif4paxx().s[6]++;\n    _this.boardGroup = new THREE.Group();\n    cov_2geif4paxx().s[7]++;\n    _this.tokenGroup = new THREE.Group();\n    cov_2geif4paxx().s[8]++;\n\n    _this.boardGroup.add(_this.tokenGroup); // translate the board to center on (0,0,0)\n\n\n    cov_2geif4paxx().s[9]++;\n\n    _this.boardGroup.translateX(-(_this.props.padding + _this.props.cellSize) * (_this.props.cols - 1) / 2);\n\n    cov_2geif4paxx().s[10]++;\n\n    _this.boardGroup.translateZ(-(_this.props.padding + _this.props.cellSize) * (_this.props.rows - 1) / 2);\n\n    return _this;\n  }\n\n  _createClass(GridImpl, [{\n    key: \"_getCellColor\",\n    value: function _getCellColor(x, y) {\n      cov_2geif4paxx().f[3]++;\n      var key = (cov_2geif4paxx().s[11]++, \"\".concat(x, \",\").concat(y));\n      var color = (cov_2geif4paxx().s[12]++, '#777777');\n      cov_2geif4paxx().s[13]++;\n\n      if (key in this.props.colorMap) {\n        cov_2geif4paxx().b[0][0]++;\n        cov_2geif4paxx().s[14]++;\n        color = this.props.colorMap[key];\n      } else {\n        cov_2geif4paxx().b[0][1]++;\n      }\n\n      cov_2geif4paxx().s[15]++;\n      return color;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      cov_2geif4paxx().f[4]++;\n      cov_2geif4paxx().s[16]++;\n      this.context.remove(this.boardGroup);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      cov_2geif4paxx().f[5]++;\n      cov_2geif4paxx().s[17]++;\n      this.context = this.props.context;\n      cov_2geif4paxx().s[18]++;\n      this.context.add(this.boardGroup); // when rerendering, render a new squareGroup\n\n      cov_2geif4paxx().s[19]++;\n      this.boardGroup.remove(this.squareGroup);\n      cov_2geif4paxx().s[20]++;\n      this.squareGroup = new THREE.Group();\n      cov_2geif4paxx().s[21]++;\n      this.boardGroup.add(this.squareGroup); // add square base\n\n      cov_2geif4paxx().s[22]++;\n\n      var _loop = function _loop(x) {\n        cov_2geif4paxx().s[24]++;\n\n        var _loop2 = function _loop2(y) {\n          var squareProps = (cov_2geif4paxx().s[26]++, {\n            x: x,\n            y: y,\n            size: _this2.props.cellSize,\n            color: _this2._getCellColor(x, y),\n            padding: _this2.props.padding,\n            thickness: _this2.props.thickness\n          });\n          var square = (cov_2geif4paxx().s[27]++, new Square(squareProps));\n          cov_2geif4paxx().s[28]++;\n\n          _this2.squareGroup.add(square);\n\n          cov_2geif4paxx().s[29]++;\n\n          var onEvent = function onEvent(e) {\n            cov_2geif4paxx().f[6]++;\n            cov_2geif4paxx().s[30]++;\n\n            if (e.type == 'click') {\n              cov_2geif4paxx().b[1][0]++;\n              cov_2geif4paxx().s[31]++;\n\n              if (_this2.props.onClick) {\n                cov_2geif4paxx().b[2][0]++;\n                cov_2geif4paxx().s[32]++;\n\n                _this2.props.onClick({\n                  x: x,\n                  y: y\n                });\n              } else {\n                cov_2geif4paxx().b[2][1]++;\n              }\n            } else {\n              cov_2geif4paxx().b[1][1]++;\n              cov_2geif4paxx().s[33]++;\n\n              if (e.type == 'mouseOver') {\n                cov_2geif4paxx().b[3][0]++;\n                cov_2geif4paxx().s[34]++;\n\n                if (_this2.props.onMouseOver) {\n                  cov_2geif4paxx().b[4][0]++;\n                  cov_2geif4paxx().s[35]++;\n\n                  _this2.props.onMouseOver({\n                    x: x,\n                    y: y\n                  });\n                } else {\n                  cov_2geif4paxx().b[4][1]++;\n                }\n              } else {\n                cov_2geif4paxx().b[3][1]++;\n                cov_2geif4paxx().s[36]++;\n\n                if (e.type == 'mouseOut') {\n                  cov_2geif4paxx().b[5][0]++;\n                  cov_2geif4paxx().s[37]++;\n\n                  if (_this2.props.onMouseOut) {\n                    cov_2geif4paxx().b[6][0]++;\n                    cov_2geif4paxx().s[38]++;\n\n                    _this2.props.onMouseOut({\n                      x: x,\n                      y: y\n                    });\n                  } else {\n                    cov_2geif4paxx().b[6][1]++;\n                  }\n                } else {\n                  cov_2geif4paxx().b[5][1]++;\n                }\n              }\n            }\n          };\n\n          cov_2geif4paxx().s[39]++;\n\n          _this2.context.regCall(square, onEvent);\n        };\n\n        for (var y = (cov_2geif4paxx().s[25]++, 0); y < _this2.props.rows; y++) {\n          _loop2(y);\n        }\n      };\n\n      for (var x = (cov_2geif4paxx().s[23]++, 0); x < this.props.cols; x++) {\n        _loop(x);\n      } // set tokens\n\n\n      var tokens = (cov_2geif4paxx().s[40]++, React.Children.map(this.props.children, function (child) {\n        cov_2geif4paxx().f[7]++;\n        cov_2geif4paxx().s[41]++;\n        return React.cloneElement(child, {\n          three: true,\n          boardSize: _this2.props.cellSize,\n          parent: _this2.tokenGroup,\n          padding: _this2.props.padding,\n          lift: _this2.props.thickness\n        });\n      }));\n      cov_2geif4paxx().s[42]++;\n\n      if (tokens) {\n        cov_2geif4paxx().b[7][0]++;\n        cov_2geif4paxx().s[43]++;\n        return tokens;\n      } else {\n        cov_2geif4paxx().b[7][1]++;\n      }\n\n      cov_2geif4paxx().s[44]++;\n      return null;\n    }\n  }]);\n\n  return GridImpl;\n}((React.Component));\n/**\n * Square\n *\n * Component that renders a square inside a Grid.\n *\n * Props\n *   x          - X coordinate on grid coordinates.\n *   y          - Y coordinate on grid coordinates.\n *   size       - Square size.\n *   color      - Color of the square\n *   thichness  - Thichness of a square.\n *   padding    - Padding between squares.\n *\n * Not meant to be used by the end user directly (use Token).\n * Also not exposed in the NPM.\n */\n\n\n_defineProperty(GridImpl, \"propTypes\", (cov_2geif4paxx().s[3]++, {\n  rows: PropTypes.number.isRequired,\n  cols: PropTypes.number.isRequired,\n  cellSize: PropTypes.number,\n  thickness: PropTypes.number,\n  padding: PropTypes.number,\n  colorMap: PropTypes.object,\n  onClick: PropTypes.func,\n  onMouseOver: PropTypes.func,\n  onMouseOut: PropTypes.func,\n  context: PropTypes.any,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.element), PropTypes.element])\n}));\n\n_defineProperty(GridImpl, \"defaultProps\", (cov_2geif4paxx().s[4]++, {\n  colorMap: {},\n  cellSize: 1,\n  padding: 0.1,\n  thickness: 0.1\n}));\n\nexport var Square = /*#__PURE__*/function (_THREE$Mesh) {\n  _inherits(Square, _THREE$Mesh);\n\n  var _super2 = _createSuper(Square);\n\n  function Square(props) {\n    var _this3;\n\n    _classCallCheck(this, Square);\n\n    cov_2geif4paxx().f[8]++;\n    cov_2geif4paxx().s[45]++;\n    _this3 = _super2.call(this);\n    cov_2geif4paxx().s[46]++;\n    _this3.userData = _objectSpread({\n      responsive: true,\n      draggable: false\n    }, props);\n    cov_2geif4paxx().s[47]++;\n    props = _this3.userData;\n    cov_2geif4paxx().s[48]++;\n    _this3.geometry = new THREE.BoxBufferGeometry(props.size, props.thickness, props.size);\n    cov_2geif4paxx().s[49]++;\n    _this3.material = new THREE.MeshLambertMaterial({\n      color: props.color\n    });\n    cov_2geif4paxx().s[50]++;\n    _this3.receiveShadow = true;\n    cov_2geif4paxx().s[51]++;\n\n    _this3.translateX(_this3.userData.x * (props.size + props.padding));\n\n    cov_2geif4paxx().s[52]++;\n\n    _this3.translateZ(_this3.userData.y * (props.size + props.padding));\n\n    cov_2geif4paxx().s[53]++;\n\n    _this3.translateY(_this3.userData.thickness / 2);\n\n    return _this3;\n  }\n\n  return Square;\n}((THREE.Mesh));","map":{"version":3,"sources":["/home/j/Documents/FreeBoardGames.org/src/ui/3d/grid.js"],"names":["React","PropTypes","UIContext","THREE","Grid","props","context","GridImpl","boardGroup","Group","tokenGroup","add","translateX","padding","cellSize","cols","translateZ","rows","x","y","key","color","colorMap","remove","squareGroup","squareProps","size","_getCellColor","thickness","square","Square","onEvent","e","type","onClick","onMouseOver","onMouseOut","regCall","tokens","Children","map","children","child","cloneElement","three","boardSize","parent","lift","Component","number","isRequired","object","func","any","oneOfType","arrayOf","element","userData","responsive","draggable","geometry","BoxBufferGeometry","material","MeshLambertMaterial","receiveShadow","translateY","Mesh"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;AAQA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAA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","sourcesContent":["/*\n * Copyright 2018 The boardgame.io Authors\n *\n * Use of this source code is governed by a MIT-style\n * license that can be found in the LICENSE file or at\n * https://opensource.org/licenses/MIT.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport UIContext from '../ui-context';\nimport * as THREE from 'three';\n\n/**\n * Grid\n *\n * Component that will show children on a cartesian regular grid.\n *\n * Props:\n *   rows       - Number of rows (height) of the grid.\n *   cols       - Number of columns (width) of the grid.\n *   cellSize   - Size of a square.\n *   thichness  - Thichness of a square.\n *   padding    - Padding between squares.\n *   colorMap   - A map from 'x,y' => color.\n *   onClick    - (x, y) => {}\n *                Called when a square is clicked.\n *   onMouseOver    - (x, y) => {}\n *                Called when a square is mouse over.\n *   onMouseOut    - (x, y) => {}\n *                Called when a square is mouse out.\n *\n * Usage:\n *\n * <Grid rows={8} cols={8}>\n *   <Token x={1} y={2}/>\n * </Grid>\n */\nexport const Grid = (props) => (\n  <UIContext.Consumer>{(context) => <GridImpl {...props} context={context} />}</UIContext.Consumer>\n);\n\nclass GridImpl extends React.Component {\n  static propTypes = {\n    rows: PropTypes.number.isRequired,\n    cols: PropTypes.number.isRequired,\n    cellSize: PropTypes.number,\n    thickness: PropTypes.number,\n    padding: PropTypes.number,\n    colorMap: PropTypes.object,\n    onClick: PropTypes.func,\n    onMouseOver: PropTypes.func,\n    onMouseOut: PropTypes.func,\n    context: PropTypes.any,\n    children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.element), PropTypes.element]),\n  };\n  static defaultProps = {\n    colorMap: {},\n    cellSize: 1,\n    padding: 0.1,\n    thickness: 0.1,\n  };\n\n  constructor(props) {\n    super(props);\n    this.boardGroup = new THREE.Group();\n    this.tokenGroup = new THREE.Group();\n    this.boardGroup.add(this.tokenGroup);\n    // translate the board to center on (0,0,0)\n    this.boardGroup.translateX((-(this.props.padding + this.props.cellSize) * (this.props.cols - 1)) / 2);\n    this.boardGroup.translateZ((-(this.props.padding + this.props.cellSize) * (this.props.rows - 1)) / 2);\n  }\n\n  _getCellColor(x, y) {\n    const key = `${x},${y}`;\n    let color = '#777777';\n    if (key in this.props.colorMap) {\n      color = this.props.colorMap[key];\n    }\n    return color;\n  }\n\n  componentWillUnmount() {\n    this.context.remove(this.boardGroup);\n  }\n\n  render() {\n    this.context = this.props.context;\n    this.context.add(this.boardGroup);\n\n    // when rerendering, render a new squareGroup\n    this.boardGroup.remove(this.squareGroup);\n    this.squareGroup = new THREE.Group();\n    this.boardGroup.add(this.squareGroup);\n\n    // add square base\n    for (let x = 0; x < this.props.cols; x++) {\n      for (let y = 0; y < this.props.rows; y++) {\n        const squareProps = {\n          x: x,\n          y: y,\n          size: this.props.cellSize,\n          color: this._getCellColor(x, y),\n          padding: this.props.padding,\n          thickness: this.props.thickness,\n        };\n\n        const square = new Square(squareProps);\n        this.squareGroup.add(square);\n\n        const onEvent = (e) => {\n          if (e.type == 'click') {\n            if (this.props.onClick) this.props.onClick({ x: x, y: y });\n          } else if (e.type == 'mouseOver') {\n            if (this.props.onMouseOver) this.props.onMouseOver({ x: x, y: y });\n          } else if (e.type == 'mouseOut') {\n            if (this.props.onMouseOut) this.props.onMouseOut({ x: x, y: y });\n          }\n        };\n\n        this.context.regCall(square, onEvent);\n      }\n    }\n\n    // set tokens\n    const tokens = React.Children.map(this.props.children, (child) => {\n      return React.cloneElement(child, {\n        three: true,\n        boardSize: this.props.cellSize,\n        parent: this.tokenGroup,\n        padding: this.props.padding,\n        lift: this.props.thickness,\n      });\n    });\n\n    if (tokens) {\n      return tokens;\n    }\n\n    return null;\n  }\n}\n\n/**\n * Square\n *\n * Component that renders a square inside a Grid.\n *\n * Props\n *   x          - X coordinate on grid coordinates.\n *   y          - Y coordinate on grid coordinates.\n *   size       - Square size.\n *   color      - Color of the square\n *   thichness  - Thichness of a square.\n *   padding    - Padding between squares.\n *\n * Not meant to be used by the end user directly (use Token).\n * Also not exposed in the NPM.\n */\nexport class Square extends THREE.Mesh {\n  constructor(props) {\n    super();\n    this.userData = {\n      responsive: true,\n      draggable: false,\n      ...props,\n    };\n    props = this.userData;\n    this.geometry = new THREE.BoxBufferGeometry(props.size, props.thickness, props.size);\n    this.material = new THREE.MeshLambertMaterial({ color: props.color });\n\n    this.receiveShadow = true;\n    this.translateX(this.userData.x * (props.size + props.padding));\n    this.translateZ(this.userData.y * (props.size + props.padding));\n    this.translateY(this.userData.thickness / 2);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}