{"ast":null,"code":"function cov_2nt5geae1v() {\n  var path = \"/home/j/Documents/FreeBoardGames.org/src/games/ninemensmorris/game.ts\";\n  var hash = \"cad816b70946ea431975f5840290c3feb0dbf914\";\n  var global = new Function(\"return this\")();\n  var gcv = \"__coverage__\";\n  var coverageData = {\n    path: \"/home/j/Documents/FreeBoardGames.org/src/games/ninemensmorris/game.ts\",\n    statementMap: {\n      \"0\": {\n        start: {\n          line: 18,\n          column: 23\n        },\n        end: {\n          line: 35,\n          column: 1\n        }\n      },\n      \"1\": {\n        start: {\n          line: 38,\n          column: 2\n        },\n        end: {\n          line: 46,\n          column: 4\n        }\n      },\n      \"2\": {\n        start: {\n          line: 39,\n          column: 4\n        },\n        end: {\n          line: 45,\n          column: 12\n        }\n      },\n      \"3\": {\n        start: {\n          line: 50,\n          column: 15\n        },\n        end: {\n          line: 50,\n          column: 69\n        }\n      },\n      \"4\": {\n        start: {\n          line: 50,\n          column: 40\n        },\n        end: {\n          line: 50,\n          column: 67\n        }\n      },\n      \"5\": {\n        start: {\n          line: 51,\n          column: 2\n        },\n        end: {\n          line: 58,\n          column: 6\n        }\n      },\n      \"6\": {\n        start: {\n          line: 52,\n          column: 27\n        },\n        end: {\n          line: 52,\n          column: 49\n        }\n      },\n      \"7\": {\n        start: {\n          line: 53,\n          column: 22\n        },\n        end: {\n          line: 53,\n          column: 72\n        }\n      },\n      \"8\": {\n        start: {\n          line: 55,\n          column: 6\n        },\n        end: {\n          line: 57,\n          column: 8\n        }\n      },\n      \"9\": {\n        start: {\n          line: 56,\n          column: 8\n        },\n        end: {\n          line: 56,\n          column: 38\n        }\n      },\n      \"10\": {\n        start: {\n          line: 59,\n          column: 2\n        },\n        end: {\n          line: 59,\n          column: 117\n        }\n      },\n      \"11\": {\n        start: {\n          line: 59,\n          column: 32\n        },\n        end: {\n          line: 59,\n          column: 115\n        }\n      },\n      \"12\": {\n        start: {\n          line: 63,\n          column: 2\n        },\n        end: {\n          line: 65,\n          column: 3\n        }\n      },\n      \"13\": {\n        start: {\n          line: 64,\n          column: 4\n        },\n        end: {\n          line: 64,\n          column: 24\n        }\n      },\n      \"14\": {\n        start: {\n          line: 67,\n          column: 19\n        },\n        end: {\n          line: 80,\n          column: 3\n        }\n      },\n      \"15\": {\n        start: {\n          line: 82,\n          column: 19\n        },\n        end: {\n          line: 82,\n          column: 33\n        }\n      },\n      \"16\": {\n        start: {\n          line: 83,\n          column: 2\n        },\n        end: {\n          line: 87,\n          column: 4\n        }\n      },\n      \"17\": {\n        start: {\n          line: 86,\n          column: 53\n        },\n        end: {\n          line: 86,\n          column: 110\n        }\n      },\n      \"18\": {\n        start: {\n          line: 91,\n          column: 2\n        },\n        end: {\n          line: 100,\n          column: 3\n        }\n      },\n      \"19\": {\n        start: {\n          line: 99,\n          column: 4\n        },\n        end: {\n          line: 99,\n          column: 24\n        }\n      },\n      \"20\": {\n        start: {\n          line: 102,\n          column: 19\n        },\n        end: {\n          line: 118,\n          column: 3\n        }\n      },\n      \"21\": {\n        start: {\n          line: 120,\n          column: 19\n        },\n        end: {\n          line: 120,\n          column: 33\n        }\n      },\n      \"22\": {\n        start: {\n          line: 121,\n          column: 2\n        },\n        end: {\n          line: 125,\n          column: 4\n        }\n      },\n      \"23\": {\n        start: {\n          line: 124,\n          column: 53\n        },\n        end: {\n          line: 124,\n          column: 110\n        }\n      },\n      \"24\": {\n        start: {\n          line: 129,\n          column: 2\n        },\n        end: {\n          line: 140,\n          column: 3\n        }\n      },\n      \"25\": {\n        start: {\n          line: 134,\n          column: 29\n        },\n        end: {\n          line: 134,\n          column: 51\n        }\n      },\n      \"26\": {\n        start: {\n          line: 135,\n          column: 24\n        },\n        end: {\n          line: 135,\n          column: 74\n        }\n      },\n      \"27\": {\n        start: {\n          line: 136,\n          column: 22\n        },\n        end: {\n          line: 136,\n          column: 67\n        }\n      },\n      \"28\": {\n        start: {\n          line: 139,\n          column: 4\n        },\n        end: {\n          line: 139,\n          column: 24\n        }\n      },\n      \"29\": {\n        start: {\n          line: 142,\n          column: 25\n        },\n        end: {\n          line: 142,\n          column: 85\n        }\n      },\n      \"30\": {\n        start: {\n          line: 142,\n          column: 55\n        },\n        end: {\n          line: 142,\n          column: 84\n        }\n      },\n      \"31\": {\n        start: {\n          line: 144,\n          column: 15\n        },\n        end: {\n          line: 160,\n          column: 3\n        }\n      },\n      \"32\": {\n        start: {\n          line: 162,\n          column: 2\n        },\n        end: {\n          line: 171,\n          column: 4\n        }\n      },\n      \"33\": {\n        start: {\n          line: 174,\n          column: 30\n        },\n        end: {\n          line: 251,\n          column: 1\n        }\n      },\n      \"34\": {\n        start: {\n          line: 180,\n          column: 24\n        },\n        end: {\n          line: 180,\n          column: 45\n        }\n      },\n      \"35\": {\n        start: {\n          line: 189,\n          column: 6\n        },\n        end: {\n          line: 198,\n          column: 7\n        }\n      },\n      \"36\": {\n        start: {\n          line: 194,\n          column: 29\n        },\n        end: {\n          line: 194,\n          column: 93\n        }\n      },\n      \"37\": {\n        start: {\n          line: 195,\n          column: 27\n        },\n        end: {\n          line: 195,\n          column: 102\n        }\n      },\n      \"38\": {\n        start: {\n          line: 195,\n          column: 66\n        },\n        end: {\n          line: 195,\n          column: 101\n        }\n      },\n      \"39\": {\n        start: {\n          line: 197,\n          column: 8\n        },\n        end: {\n          line: 197,\n          column: 117\n        }\n      },\n      \"40\": {\n        start: {\n          line: 197,\n          column: 67\n        },\n        end: {\n          line: 197,\n          column: 101\n        }\n      },\n      \"41\": {\n        start: {\n          line: 201,\n          column: 6\n        },\n        end: {\n          line: 203,\n          column: 7\n        }\n      },\n      \"42\": {\n        start: {\n          line: 202,\n          column: 8\n        },\n        end: {\n          line: 202,\n          column: 29\n        }\n      },\n      \"43\": {\n        start: {\n          line: 207,\n          column: 4\n        },\n        end: {\n          line: 209,\n          column: 5\n        }\n      },\n      \"44\": {\n        start: {\n          line: 207,\n          column: 35\n        },\n        end: {\n          line: 207,\n          column: 58\n        }\n      },\n      \"45\": {\n        start: {\n          line: 208,\n          column: 6\n        },\n        end: {\n          line: 208,\n          column: 93\n        }\n      },\n      \"46\": {\n        start: {\n          line: 208,\n          column: 55\n        },\n        end: {\n          line: 208,\n          column: 78\n        }\n      },\n      \"47\": {\n        start: {\n          line: 227,\n          column: 28\n        },\n        end: {\n          line: 227,\n          column: 95\n        }\n      },\n      \"48\": {\n        start: {\n          line: 227,\n          column: 61\n        },\n        end: {\n          line: 227,\n          column: 93\n        }\n      },\n      \"49\": {\n        start: {\n          line: 229,\n          column: 4\n        },\n        end: {\n          line: 233,\n          column: 7\n        }\n      },\n      \"50\": {\n        start: {\n          line: 230,\n          column: 19\n        },\n        end: {\n          line: 230,\n          column: 46\n        }\n      },\n      \"51\": {\n        start: {\n          line: 231,\n          column: 19\n        },\n        end: {\n          line: 231,\n          column: 52\n        }\n      },\n      \"52\": {\n        start: {\n          line: 232,\n          column: 6\n        },\n        end: {\n          line: 232,\n          column: 41\n        }\n      },\n      \"53\": {\n        start: {\n          line: 235,\n          column: 4\n        },\n        end: {\n          line: 239,\n          column: 5\n        }\n      },\n      \"54\": {\n        start: {\n          line: 235,\n          column: 17\n        },\n        end: {\n          line: 235,\n          column: 18\n        }\n      },\n      \"55\": {\n        start: {\n          line: 236,\n          column: 6\n        },\n        end: {\n          line: 236,\n          column: 40\n        }\n      },\n      \"56\": {\n        start: {\n          line: 237,\n          column: 6\n        },\n        end: {\n          line: 237,\n          column: 48\n        }\n      },\n      \"57\": {\n        start: {\n          line: 238,\n          column: 6\n        },\n        end: {\n          line: 238,\n          column: 45\n        }\n      },\n      \"58\": {\n        start: {\n          line: 241,\n          column: 30\n        },\n        end: {\n          line: 241,\n          column: 94\n        }\n      },\n      \"59\": {\n        start: {\n          line: 241,\n          column: 75\n        },\n        end: {\n          line: 241,\n          column: 92\n        }\n      },\n      \"60\": {\n        start: {\n          line: 243,\n          column: 4\n        },\n        end: {\n          line: 249,\n          column: 6\n        }\n      },\n      \"61\": {\n        start: {\n          line: 253,\n          column: 34\n        },\n        end: {\n          line: 253,\n          column: 44\n        }\n      }\n    },\n    fnMap: {\n      \"0\": {\n        name: \"getMills\",\n        decl: {\n          start: {\n            line: 37,\n            column: 9\n          },\n          end: {\n            line: 37,\n            column: 17\n          }\n        },\n        loc: {\n          start: {\n            line: 37,\n            column: 25\n          },\n          end: {\n            line: 47,\n            column: 1\n          }\n        },\n        line: 37\n      },\n      \"1\": {\n        name: \"(anonymous_1)\",\n        decl: {\n          start: {\n            line: 38,\n            column: 28\n          },\n          end: {\n            line: 38,\n            column: 29\n          }\n        },\n        loc: {\n          start: {\n            line: 39,\n            column: 4\n          },\n          end: {\n            line: 45,\n            column: 12\n          }\n        },\n        line: 39\n      },\n      \"2\": {\n        name: \"isTherePieceOutsideMill\",\n        decl: {\n          start: {\n            line: 49,\n            column: 9\n          },\n          end: {\n            line: 49,\n            column: 32\n          }\n        },\n        loc: {\n          start: {\n            line: 49,\n            column: 55\n          },\n          end: {\n            line: 60,\n            column: 1\n          }\n        },\n        line: 49\n      },\n      \"3\": {\n        name: \"(anonymous_3)\",\n        decl: {\n          start: {\n            line: 50,\n            column: 28\n          },\n          end: {\n            line: 50,\n            column: 29\n          }\n        },\n        loc: {\n          start: {\n            line: 50,\n            column: 40\n          },\n          end: {\n            line: 50,\n            column: 67\n          }\n        },\n        line: 50\n      },\n      \"4\": {\n        name: \"(anonymous_4)\",\n        decl: {\n          start: {\n            line: 52,\n            column: 9\n          },\n          end: {\n            line: 52,\n            column: 10\n          }\n        },\n        loc: {\n          start: {\n            line: 52,\n            column: 27\n          },\n          end: {\n            line: 52,\n            column: 49\n          }\n        },\n        line: 52\n      },\n      \"5\": {\n        name: \"(anonymous_5)\",\n        decl: {\n          start: {\n            line: 53,\n            column: 12\n          },\n          end: {\n            line: 53,\n            column: 13\n          }\n        },\n        loc: {\n          start: {\n            line: 53,\n            column: 22\n          },\n          end: {\n            line: 53,\n            column: 72\n          }\n        },\n        line: 53\n      },\n      \"6\": {\n        name: \"(anonymous_6)\",\n        decl: {\n          start: {\n            line: 54,\n            column: 13\n          },\n          end: {\n            line: 54,\n            column: 14\n          }\n        },\n        loc: {\n          start: {\n            line: 55,\n            column: 6\n          },\n          end: {\n            line: 57,\n            column: 8\n          }\n        },\n        line: 55\n      },\n      \"7\": {\n        name: \"(anonymous_7)\",\n        decl: {\n          start: {\n            line: 55,\n            column: 41\n          },\n          end: {\n            line: 55,\n            column: 42\n          }\n        },\n        loc: {\n          start: {\n            line: 55,\n            column: 55\n          },\n          end: {\n            line: 57,\n            column: 7\n          }\n        },\n        line: 55\n      },\n      \"8\": {\n        name: \"(anonymous_8)\",\n        decl: {\n          start: {\n            line: 59,\n            column: 21\n          },\n          end: {\n            line: 59,\n            column: 22\n          }\n        },\n        loc: {\n          start: {\n            line: 59,\n            column: 32\n          },\n          end: {\n            line: 59,\n            column: 115\n          }\n        },\n        line: 59\n      },\n      \"9\": {\n        name: \"placePiece\",\n        decl: {\n          start: {\n            line: 62,\n            column: 16\n          },\n          end: {\n            line: 62,\n            column: 26\n          }\n        },\n        loc: {\n          start: {\n            line: 62,\n            column: 80\n          },\n          end: {\n            line: 88,\n            column: 1\n          }\n        },\n        line: 62\n      },\n      \"10\": {\n        name: \"(anonymous_10)\",\n        decl: {\n          start: {\n            line: 86,\n            column: 36\n          },\n          end: {\n            line: 86,\n            column: 37\n          }\n        },\n        loc: {\n          start: {\n            line: 86,\n            column: 53\n          },\n          end: {\n            line: 86,\n            column: 110\n          }\n        },\n        line: 86\n      },\n      \"11\": {\n        name: \"movePiece\",\n        decl: {\n          start: {\n            line: 90,\n            column: 16\n          },\n          end: {\n            line: 90,\n            column: 25\n          }\n        },\n        loc: {\n          start: {\n            line: 90,\n            column: 100\n          },\n          end: {\n            line: 126,\n            column: 1\n          }\n        },\n        line: 90\n      },\n      \"12\": {\n        name: \"(anonymous_12)\",\n        decl: {\n          start: {\n            line: 124,\n            column: 36\n          },\n          end: {\n            line: 124,\n            column: 37\n          }\n        },\n        loc: {\n          start: {\n            line: 124,\n            column: 53\n          },\n          end: {\n            line: 124,\n            column: 110\n          }\n        },\n        line: 124\n      },\n      \"13\": {\n        name: \"removePiece\",\n        decl: {\n          start: {\n            line: 128,\n            column: 16\n          },\n          end: {\n            line: 128,\n            column: 27\n          }\n        },\n        loc: {\n          start: {\n            line: 128,\n            column: 68\n          },\n          end: {\n            line: 172,\n            column: 1\n          }\n        },\n        line: 128\n      },\n      \"14\": {\n        name: \"(anonymous_14)\",\n        decl: {\n          start: {\n            line: 134,\n            column: 11\n          },\n          end: {\n            line: 134,\n            column: 12\n          }\n        },\n        loc: {\n          start: {\n            line: 134,\n            column: 29\n          },\n          end: {\n            line: 134,\n            column: 51\n          }\n        },\n        line: 134\n      },\n      \"15\": {\n        name: \"(anonymous_15)\",\n        decl: {\n          start: {\n            line: 135,\n            column: 14\n          },\n          end: {\n            line: 135,\n            column: 15\n          }\n        },\n        loc: {\n          start: {\n            line: 135,\n            column: 24\n          },\n          end: {\n            line: 135,\n            column: 74\n          }\n        },\n        line: 135\n      },\n      \"16\": {\n        name: \"(anonymous_16)\",\n        decl: {\n          start: {\n            line: 136,\n            column: 12\n          },\n          end: {\n            line: 136,\n            column: 13\n          }\n        },\n        loc: {\n          start: {\n            line: 136,\n            column: 22\n          },\n          end: {\n            line: 136,\n            column: 67\n          }\n        },\n        line: 136\n      },\n      \"17\": {\n        name: \"(anonymous_17)\",\n        decl: {\n          start: {\n            line: 142,\n            column: 45\n          },\n          end: {\n            line: 142,\n            column: 46\n          }\n        },\n        loc: {\n          start: {\n            line: 142,\n            column: 55\n          },\n          end: {\n            line: 142,\n            column: 84\n          }\n        },\n        line: 142\n      },\n      \"18\": {\n        name: \"(anonymous_18)\",\n        decl: {\n          start: {\n            line: 180,\n            column: 13\n          },\n          end: {\n            line: 180,\n            column: 14\n          }\n        },\n        loc: {\n          start: {\n            line: 180,\n            column: 24\n          },\n          end: {\n            line: 180,\n            column: 45\n          }\n        },\n        line: 180\n      },\n      \"19\": {\n        name: \"(anonymous_19)\",\n        decl: {\n          start: {\n            line: 188,\n            column: 13\n          },\n          end: {\n            line: 188,\n            column: 14\n          }\n        },\n        loc: {\n          start: {\n            line: 188,\n            column: 29\n          },\n          end: {\n            line: 199,\n            column: 5\n          }\n        },\n        line: 188\n      },\n      \"20\": {\n        name: \"(anonymous_20)\",\n        decl: {\n          start: {\n            line: 194,\n            column: 18\n          },\n          end: {\n            line: 194,\n            column: 19\n          }\n        },\n        loc: {\n          start: {\n            line: 194,\n            column: 29\n          },\n          end: {\n            line: 194,\n            column: 93\n          }\n        },\n        line: 194\n      },\n      \"21\": {\n        name: \"(anonymous_21)\",\n        decl: {\n          start: {\n            line: 195,\n            column: 16\n          },\n          end: {\n            line: 195,\n            column: 17\n          }\n        },\n        loc: {\n          start: {\n            line: 195,\n            column: 27\n          },\n          end: {\n            line: 195,\n            column: 102\n          }\n        },\n        line: 195\n      },\n      \"22\": {\n        name: \"(anonymous_22)\",\n        decl: {\n          start: {\n            line: 195,\n            column: 50\n          },\n          end: {\n            line: 195,\n            column: 51\n          }\n        },\n        loc: {\n          start: {\n            line: 195,\n            column: 66\n          },\n          end: {\n            line: 195,\n            column: 101\n          }\n        },\n        line: 195\n      },\n      \"23\": {\n        name: \"(anonymous_23)\",\n        decl: {\n          start: {\n            line: 197,\n            column: 57\n          },\n          end: {\n            line: 197,\n            column: 58\n          }\n        },\n        loc: {\n          start: {\n            line: 197,\n            column: 67\n          },\n          end: {\n            line: 197,\n            column: 101\n          }\n        },\n        line: 197\n      },\n      \"24\": {\n        name: \"(anonymous_24)\",\n        decl: {\n          start: {\n            line: 200,\n            column: 12\n          },\n          end: {\n            line: 200,\n            column: 13\n          }\n        },\n        loc: {\n          start: {\n            line: 200,\n            column: 28\n          },\n          end: {\n            line: 204,\n            column: 5\n          }\n        },\n        line: 200\n      },\n      \"25\": {\n        name: \"(anonymous_25)\",\n        decl: {\n          start: {\n            line: 206,\n            column: 9\n          },\n          end: {\n            line: 206,\n            column: 10\n          }\n        },\n        loc: {\n          start: {\n            line: 206,\n            column: 20\n          },\n          end: {\n            line: 210,\n            column: 3\n          }\n        },\n        line: 206\n      },\n      \"26\": {\n        name: \"(anonymous_26)\",\n        decl: {\n          start: {\n            line: 207,\n            column: 23\n          },\n          end: {\n            line: 207,\n            column: 24\n          }\n        },\n        loc: {\n          start: {\n            line: 207,\n            column: 35\n          },\n          end: {\n            line: 207,\n            column: 58\n          }\n        },\n        line: 207\n      },\n      \"27\": {\n        name: \"(anonymous_27)\",\n        decl: {\n          start: {\n            line: 208,\n            column: 43\n          },\n          end: {\n            line: 208,\n            column: 44\n          }\n        },\n        loc: {\n          start: {\n            line: 208,\n            column: 55\n          },\n          end: {\n            line: 208,\n            column: 78\n          }\n        },\n        line: 208\n      },\n      \"28\": {\n        name: \"(anonymous_28)\",\n        decl: {\n          start: {\n            line: 211,\n            column: 9\n          },\n          end: {\n            line: 211,\n            column: 10\n          }\n        },\n        loc: {\n          start: {\n            line: 211,\n            column: 22\n          },\n          end: {\n            line: 250,\n            column: 3\n          }\n        },\n        line: 211\n      },\n      \"29\": {\n        name: \"(anonymous_29)\",\n        decl: {\n          start: {\n            line: 227,\n            column: 54\n          },\n          end: {\n            line: 227,\n            column: 55\n          }\n        },\n        loc: {\n          start: {\n            line: 227,\n            column: 61\n          },\n          end: {\n            line: 227,\n            column: 93\n          }\n        },\n        line: 227\n      },\n      \"30\": {\n        name: \"(anonymous_30)\",\n        decl: {\n          start: {\n            line: 229,\n            column: 19\n          },\n          end: {\n            line: 229,\n            column: 20\n          }\n        },\n        loc: {\n          start: {\n            line: 229,\n            column: 33\n          },\n          end: {\n            line: 233,\n            column: 5\n          }\n        },\n        line: 229\n      },\n      \"31\": {\n        name: \"(anonymous_31)\",\n        decl: {\n          start: {\n            line: 241,\n            column: 68\n          },\n          end: {\n            line: 241,\n            column: 69\n          }\n        },\n        loc: {\n          start: {\n            line: 241,\n            column: 75\n          },\n          end: {\n            line: 241,\n            column: 92\n          }\n        },\n        line: 241\n      }\n    },\n    branchMap: {\n      \"0\": {\n        loc: {\n          start: {\n            line: 39,\n            column: 4\n          },\n          end: {\n            line: 45,\n            column: 12\n          }\n        },\n        type: \"cond-expr\",\n        locations: [{\n          start: {\n            line: 44,\n            column: 8\n          },\n          end: {\n            line: 44,\n            column: 43\n          }\n        }, {\n          start: {\n            line: 45,\n            column: 8\n          },\n          end: {\n            line: 45,\n            column: 12\n          }\n        }],\n        line: 39\n      },\n      \"1\": {\n        loc: {\n          start: {\n            line: 39,\n            column: 4\n          },\n          end: {\n            line: 43,\n            column: 79\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 39,\n            column: 4\n          },\n          end: {\n            line: 39,\n            column: 41\n          }\n        }, {\n          start: {\n            line: 40,\n            column: 4\n          },\n          end: {\n            line: 40,\n            column: 41\n          }\n        }, {\n          start: {\n            line: 41,\n            column: 4\n          },\n          end: {\n            line: 41,\n            column: 41\n          }\n        }, {\n          start: {\n            line: 42,\n            column: 4\n          },\n          end: {\n            line: 42,\n            column: 79\n          }\n        }, {\n          start: {\n            line: 43,\n            column: 4\n          },\n          end: {\n            line: 43,\n            column: 79\n          }\n        }],\n        line: 39\n      },\n      \"2\": {\n        loc: {\n          start: {\n            line: 53,\n            column: 22\n          },\n          end: {\n            line: 53,\n            column: 72\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 53,\n            column: 22\n          },\n          end: {\n            line: 53,\n            column: 41\n          }\n        }, {\n          start: {\n            line: 53,\n            column: 45\n          },\n          end: {\n            line: 53,\n            column: 72\n          }\n        }],\n        line: 53\n      },\n      \"3\": {\n        loc: {\n          start: {\n            line: 59,\n            column: 32\n          },\n          end: {\n            line: 59,\n            column: 115\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 59,\n            column: 32\n          },\n          end: {\n            line: 59,\n            column: 57\n          }\n        }, {\n          start: {\n            line: 59,\n            column: 61\n          },\n          end: {\n            line: 59,\n            column: 71\n          }\n        }, {\n          start: {\n            line: 59,\n            column: 75\n          },\n          end: {\n            line: 59,\n            column: 115\n          }\n        }],\n        line: 59\n      },\n      \"4\": {\n        loc: {\n          start: {\n            line: 63,\n            column: 2\n          },\n          end: {\n            line: 65,\n            column: 3\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 63,\n            column: 2\n          },\n          end: {\n            line: 65,\n            column: 3\n          }\n        }, {\n          start: {\n            line: 63,\n            column: 2\n          },\n          end: {\n            line: 65,\n            column: 3\n          }\n        }],\n        line: 63\n      },\n      \"5\": {\n        loc: {\n          start: {\n            line: 63,\n            column: 6\n          },\n          end: {\n            line: 63,\n            column: 62\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 63,\n            column: 6\n          },\n          end: {\n            line: 63,\n            column: 39\n          }\n        }, {\n          start: {\n            line: 63,\n            column: 43\n          },\n          end: {\n            line: 63,\n            column: 62\n          }\n        }],\n        line: 63\n      },\n      \"6\": {\n        loc: {\n          start: {\n            line: 86,\n            column: 53\n          },\n          end: {\n            line: 86,\n            column: 110\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 86,\n            column: 53\n          },\n          end: {\n            line: 86,\n            column: 74\n          }\n        }, {\n          start: {\n            line: 86,\n            column: 78\n          },\n          end: {\n            line: 86,\n            column: 110\n          }\n        }],\n        line: 86\n      },\n      \"7\": {\n        loc: {\n          start: {\n            line: 91,\n            column: 2\n          },\n          end: {\n            line: 100,\n            column: 3\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 91,\n            column: 2\n          },\n          end: {\n            line: 100,\n            column: 3\n          }\n        }, {\n          start: {\n            line: 91,\n            column: 2\n          },\n          end: {\n            line: 100,\n            column: 3\n          }\n        }],\n        line: 91\n      },\n      \"8\": {\n        loc: {\n          start: {\n            line: 92,\n            column: 4\n          },\n          end: {\n            line: 97,\n            column: 52\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 92,\n            column: 4\n          },\n          end: {\n            line: 92,\n            column: 37\n          }\n        }, {\n          start: {\n            line: 93,\n            column: 4\n          },\n          end: {\n            line: 93,\n            column: 52\n          }\n        }, {\n          start: {\n            line: 94,\n            column: 4\n          },\n          end: {\n            line: 94,\n            column: 40\n          }\n        }, {\n          start: {\n            line: 95,\n            column: 4\n          },\n          end: {\n            line: 95,\n            column: 23\n          }\n        }, {\n          start: {\n            line: 96,\n            column: 5\n          },\n          end: {\n            line: 96,\n            column: 58\n          }\n        }, {\n          start: {\n            line: 97,\n            column: 6\n          },\n          end: {\n            line: 97,\n            column: 51\n          }\n        }],\n        line: 92\n      },\n      \"9\": {\n        loc: {\n          start: {\n            line: 124,\n            column: 53\n          },\n          end: {\n            line: 124,\n            column: 110\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 124,\n            column: 53\n          },\n          end: {\n            line: 124,\n            column: 74\n          }\n        }, {\n          start: {\n            line: 124,\n            column: 78\n          },\n          end: {\n            line: 124,\n            column: 110\n          }\n        }],\n        line: 124\n      },\n      \"10\": {\n        loc: {\n          start: {\n            line: 129,\n            column: 2\n          },\n          end: {\n            line: 140,\n            column: 3\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 129,\n            column: 2\n          },\n          end: {\n            line: 140,\n            column: 3\n          }\n        }, {\n          start: {\n            line: 129,\n            column: 2\n          },\n          end: {\n            line: 140,\n            column: 3\n          }\n        }],\n        line: 129\n      },\n      \"11\": {\n        loc: {\n          start: {\n            line: 130,\n            column: 4\n          },\n          end: {\n            line: 137,\n            column: 38\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 130,\n            column: 4\n          },\n          end: {\n            line: 130,\n            column: 24\n          }\n        }, {\n          start: {\n            line: 131,\n            column: 4\n          },\n          end: {\n            line: 131,\n            column: 37\n          }\n        }, {\n          start: {\n            line: 132,\n            column: 4\n          },\n          end: {\n            line: 132,\n            column: 52\n          }\n        }, {\n          start: {\n            line: 133,\n            column: 5\n          },\n          end: {\n            line: 136,\n            column: 68\n          }\n        }, {\n          start: {\n            line: 137,\n            column: 6\n          },\n          end: {\n            line: 137,\n            column: 37\n          }\n        }],\n        line: 130\n      },\n      \"12\": {\n        loc: {\n          start: {\n            line: 135,\n            column: 24\n          },\n          end: {\n            line: 135,\n            column: 74\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 135,\n            column: 24\n          },\n          end: {\n            line: 135,\n            column: 43\n          }\n        }, {\n          start: {\n            line: 135,\n            column: 47\n          },\n          end: {\n            line: 135,\n            column: 74\n          }\n        }],\n        line: 135\n      },\n      \"13\": {\n        loc: {\n          start: {\n            line: 189,\n            column: 6\n          },\n          end: {\n            line: 198,\n            column: 7\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 189,\n            column: 6\n          },\n          end: {\n            line: 198,\n            column: 7\n          }\n        }, {\n          start: {\n            line: 189,\n            column: 6\n          },\n          end: {\n            line: 198,\n            column: 7\n          }\n        }],\n        line: 189\n      },\n      \"14\": {\n        loc: {\n          start: {\n            line: 190,\n            column: 8\n          },\n          end: {\n            line: 195,\n            column: 103\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 190,\n            column: 8\n          },\n          end: {\n            line: 190,\n            column: 32\n          }\n        }, {\n          start: {\n            line: 191,\n            column: 8\n          },\n          end: {\n            line: 191,\n            column: 28\n          }\n        }, {\n          start: {\n            line: 192,\n            column: 8\n          },\n          end: {\n            line: 192,\n            column: 58\n          }\n        }, {\n          start: {\n            line: 193,\n            column: 8\n          },\n          end: {\n            line: 195,\n            column: 103\n          }\n        }],\n        line: 190\n      },\n      \"15\": {\n        loc: {\n          start: {\n            line: 194,\n            column: 29\n          },\n          end: {\n            line: 194,\n            column: 93\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 194,\n            column: 29\n          },\n          end: {\n            line: 194,\n            column: 49\n          }\n        }, {\n          start: {\n            line: 194,\n            column: 53\n          },\n          end: {\n            line: 194,\n            column: 93\n          }\n        }],\n        line: 194\n      },\n      \"16\": {\n        loc: {\n          start: {\n            line: 201,\n            column: 6\n          },\n          end: {\n            line: 203,\n            column: 7\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 201,\n            column: 6\n          },\n          end: {\n            line: 203,\n            column: 7\n          }\n        }, {\n          start: {\n            line: 201,\n            column: 6\n          },\n          end: {\n            line: 203,\n            column: 7\n          }\n        }],\n        line: 201\n      },\n      \"17\": {\n        loc: {\n          start: {\n            line: 207,\n            column: 4\n          },\n          end: {\n            line: 209,\n            column: 5\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 207,\n            column: 4\n          },\n          end: {\n            line: 209,\n            column: 5\n          }\n        }, {\n          start: {\n            line: 207,\n            column: 4\n          },\n          end: {\n            line: 209,\n            column: 5\n          }\n        }],\n        line: 207\n      },\n      \"18\": {\n        loc: {\n          start: {\n            line: 230,\n            column: 19\n          },\n          end: {\n            line: 230,\n            column: 46\n          }\n        },\n        type: \"cond-expr\",\n        locations: [{\n          start: {\n            line: 230,\n            column: 33\n          },\n          end: {\n            line: 230,\n            column: 38\n          }\n        }, {\n          start: {\n            line: 230,\n            column: 41\n          },\n          end: {\n            line: 230,\n            column: 46\n          }\n        }],\n        line: 230\n      },\n      \"19\": {\n        loc: {\n          start: {\n            line: 231,\n            column: 19\n          },\n          end: {\n            line: 231,\n            column: 52\n          }\n        },\n        type: \"cond-expr\",\n        locations: [{\n          start: {\n            line: 231,\n            column: 39\n          },\n          end: {\n            line: 231,\n            column: 44\n          }\n        }, {\n          start: {\n            line: 231,\n            column: 47\n          },\n          end: {\n            line: 231,\n            column: 52\n          }\n        }],\n        line: 231\n      }\n    },\n    s: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0,\n      \"7\": 0,\n      \"8\": 0,\n      \"9\": 0,\n      \"10\": 0,\n      \"11\": 0,\n      \"12\": 0,\n      \"13\": 0,\n      \"14\": 0,\n      \"15\": 0,\n      \"16\": 0,\n      \"17\": 0,\n      \"18\": 0,\n      \"19\": 0,\n      \"20\": 0,\n      \"21\": 0,\n      \"22\": 0,\n      \"23\": 0,\n      \"24\": 0,\n      \"25\": 0,\n      \"26\": 0,\n      \"27\": 0,\n      \"28\": 0,\n      \"29\": 0,\n      \"30\": 0,\n      \"31\": 0,\n      \"32\": 0,\n      \"33\": 0,\n      \"34\": 0,\n      \"35\": 0,\n      \"36\": 0,\n      \"37\": 0,\n      \"38\": 0,\n      \"39\": 0,\n      \"40\": 0,\n      \"41\": 0,\n      \"42\": 0,\n      \"43\": 0,\n      \"44\": 0,\n      \"45\": 0,\n      \"46\": 0,\n      \"47\": 0,\n      \"48\": 0,\n      \"49\": 0,\n      \"50\": 0,\n      \"51\": 0,\n      \"52\": 0,\n      \"53\": 0,\n      \"54\": 0,\n      \"55\": 0,\n      \"56\": 0,\n      \"57\": 0,\n      \"58\": 0,\n      \"59\": 0,\n      \"60\": 0,\n      \"61\": 0\n    },\n    f: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0,\n      \"7\": 0,\n      \"8\": 0,\n      \"9\": 0,\n      \"10\": 0,\n      \"11\": 0,\n      \"12\": 0,\n      \"13\": 0,\n      \"14\": 0,\n      \"15\": 0,\n      \"16\": 0,\n      \"17\": 0,\n      \"18\": 0,\n      \"19\": 0,\n      \"20\": 0,\n      \"21\": 0,\n      \"22\": 0,\n      \"23\": 0,\n      \"24\": 0,\n      \"25\": 0,\n      \"26\": 0,\n      \"27\": 0,\n      \"28\": 0,\n      \"29\": 0,\n      \"30\": 0,\n      \"31\": 0\n    },\n    b: {\n      \"0\": [0, 0],\n      \"1\": [0, 0, 0, 0, 0],\n      \"2\": [0, 0],\n      \"3\": [0, 0, 0],\n      \"4\": [0, 0],\n      \"5\": [0, 0],\n      \"6\": [0, 0],\n      \"7\": [0, 0],\n      \"8\": [0, 0, 0, 0, 0, 0],\n      \"9\": [0, 0],\n      \"10\": [0, 0],\n      \"11\": [0, 0, 0, 0, 0],\n      \"12\": [0, 0],\n      \"13\": [0, 0],\n      \"14\": [0, 0, 0, 0],\n      \"15\": [0, 0],\n      \"16\": [0, 0],\n      \"17\": [0, 0],\n      \"18\": [0, 0],\n      \"19\": [0, 0]\n    },\n    _coverageSchema: \"1a1c01bbd47fc00a2c39e90264f33305004495a9\",\n    hash: \"cad816b70946ea431975f5840290c3feb0dbf914\"\n  };\n  var coverage = global[gcv] || (global[gcv] = {});\n\n  if (!coverage[path] || coverage[path].hash !== hash) {\n    coverage[path] = coverageData;\n  }\n\n  var actualCoverage = coverage[path];\n\n  cov_2nt5geae1v = function () {\n    return actualCoverage;\n  };\n\n  return actualCoverage;\n}\n\ncov_2nt5geae1v();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { INVALID_MOVE } from 'boardgame.io/core';\nexport let Phase;\n\n(function (Phase) {\n  Phase[\"Place\"] = \"Place\";\n  Phase[\"Move\"] = \"Move\";\n})(Phase || (Phase = {}));\n\nconst millsPositions = (cov_2nt5geae1v().s[0]++, [[0, 1, 2], [2, 3, 4], [4, 5, 6], [6, 7, 0], [8, 9, 10], [10, 11, 12], [12, 13, 14], [14, 15, 8], [16, 17, 18], [18, 19, 20], [20, 21, 22], [22, 23, 16], [1, 9, 17], [3, 11, 19], [5, 13, 21], [7, 15, 23]]);\n\nfunction getMills(G) {\n  cov_2nt5geae1v().f[0]++;\n  cov_2nt5geae1v().s[1]++;\n  return millsPositions.map(positions => {\n    cov_2nt5geae1v().f[1]++;\n    cov_2nt5geae1v().s[2]++;\n    return (cov_2nt5geae1v().b[1][0]++, G.points[positions[0]].piece !== null) && (cov_2nt5geae1v().b[1][1]++, G.points[positions[1]].piece !== null) && (cov_2nt5geae1v().b[1][2]++, G.points[positions[2]].piece !== null) && (cov_2nt5geae1v().b[1][3]++, G.points[positions[0]].piece.player === G.points[positions[1]].piece.player) && (cov_2nt5geae1v().b[1][4]++, G.points[positions[1]].piece.player === G.points[positions[2]].piece.player) ? (cov_2nt5geae1v().b[0][0]++, G.points[positions[0]].piece.player) : (cov_2nt5geae1v().b[0][1]++, null);\n  });\n}\n\nfunction isTherePieceOutsideMill(G, ctx) {\n  cov_2nt5geae1v().f[2]++;\n  let points = (cov_2nt5geae1v().s[3]++, G.points.map(point => {\n    cov_2nt5geae1v().f[3]++;\n    cov_2nt5geae1v().s[4]++;\n    return {\n      data: point,\n      safe: true\n    };\n  }));\n  cov_2nt5geae1v().s[5]++;\n  G.mills.map((mill, index) => {\n    cov_2nt5geae1v().f[4]++;\n    cov_2nt5geae1v().s[6]++;\n    return {\n      owner: mill,\n      index\n    };\n  }).filter(mill => {\n    cov_2nt5geae1v().f[5]++;\n    cov_2nt5geae1v().s[7]++;\n    return (cov_2nt5geae1v().b[2][0]++, mill.owner !== null) && (cov_2nt5geae1v().b[2][1]++, mill.owner !== ctx.playerID);\n  }).forEach(mill => {\n    cov_2nt5geae1v().f[6]++;\n    cov_2nt5geae1v().s[8]++;\n    return millsPositions[mill.index].forEach(position => {\n      cov_2nt5geae1v().f[7]++;\n      cov_2nt5geae1v().s[9]++;\n      points[position].safe = false;\n    });\n  });\n  cov_2nt5geae1v().s[10]++;\n  return points.some(point => {\n    cov_2nt5geae1v().f[8]++;\n    cov_2nt5geae1v().s[11]++;\n    return (cov_2nt5geae1v().b[3][0]++, point.data.piece !== null) && (cov_2nt5geae1v().b[3][1]++, point.safe) && (cov_2nt5geae1v().b[3][2]++, point.data.piece.player !== ctx.playerID);\n  });\n}\n\nexport function placePiece(G, ctx, position) {\n  cov_2nt5geae1v().f[9]++;\n  cov_2nt5geae1v().s[12]++;\n\n  if ((cov_2nt5geae1v().b[5][0]++, G.points[position].piece !== null) || (cov_2nt5geae1v().b[5][1]++, G.haveToRemovePiece)) {\n    cov_2nt5geae1v().b[4][0]++;\n    cov_2nt5geae1v().s[13]++;\n    return INVALID_MOVE;\n  } else {\n    cov_2nt5geae1v().b[4][1]++;\n  }\n\n  const newG = (cov_2nt5geae1v().s[14]++, _objectSpread({}, G, {\n    // FIXME:\n    // Type '(number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; })[]' is not assignable to type 'Point[]'.\n    // Type 'number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; }' is not assignable to type 'Point'.\n    points: Object.values(_objectSpread({}, G.points, {\n      [position]: _objectSpread({}, G.points[position], {\n        piece: {\n          player: ctx.playerID,\n          key: G.piecesPlaced\n        }\n      })\n    })),\n    piecesPlaced: G.piecesPlaced + 1\n  }));\n  const newMills = (cov_2nt5geae1v().s[15]++, getMills(newG));\n  cov_2nt5geae1v().s[16]++;\n  return _objectSpread({}, newG, {\n    mills: newMills,\n    haveToRemovePiece: G.mills.some((mill, index) => {\n      cov_2nt5geae1v().f[10]++;\n      cov_2nt5geae1v().s[17]++;\n      return (cov_2nt5geae1v().b[6][0]++, mill !== ctx.playerID) && (cov_2nt5geae1v().b[6][1]++, newMills[index] === ctx.playerID);\n    })\n  });\n}\nexport function movePiece(G, ctx, position, newPosition) {\n  cov_2nt5geae1v().f[11]++;\n  cov_2nt5geae1v().s[18]++;\n\n  if ((cov_2nt5geae1v().b[8][0]++, G.points[position].piece === null) || (cov_2nt5geae1v().b[8][1]++, G.points[position].piece.player !== ctx.playerID) || (cov_2nt5geae1v().b[8][2]++, // Check if player owns this piece // Check if piece exists\n  G.points[newPosition].piece !== null) || (cov_2nt5geae1v().b[8][3]++, // Check if point isn't already occupied\n  G.haveToRemovePiece) || // Check if player has to remove piece\n  (cov_2nt5geae1v().b[8][4]++, !G.points[position].connections.includes(newPosition)) && (cov_2nt5geae1v().b[8][5]++, // Check if connection exists\n  G.players[ctx.playerID].lostPieces < 6) // Ignore the check if player has < 4 pieces\n  ) {\n      cov_2nt5geae1v().b[7][0]++;\n      cov_2nt5geae1v().s[19]++;\n      return INVALID_MOVE;\n    } else {\n    cov_2nt5geae1v().b[7][1]++;\n  }\n\n  const newG = (cov_2nt5geae1v().s[20]++, _objectSpread({}, G, {\n    // FIXME:\n    // Type '(number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; })[]' is not assignable to type 'Point[]'.\n    // Type 'number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; }' is not assignable to type 'Point'.\n    points: Object.values(_objectSpread({}, G.points, {\n      [position]: _objectSpread({}, G.points[position], {\n        piece: null\n      }),\n      [newPosition]: _objectSpread({}, G.points[newPosition], {\n        piece: G.points[position].piece\n      })\n    }))\n  }));\n  const newMills = (cov_2nt5geae1v().s[21]++, getMills(newG));\n  cov_2nt5geae1v().s[22]++;\n  return _objectSpread({}, newG, {\n    mills: newMills,\n    haveToRemovePiece: G.mills.some((mill, index) => {\n      cov_2nt5geae1v().f[12]++;\n      cov_2nt5geae1v().s[23]++;\n      return (cov_2nt5geae1v().b[9][0]++, mill !== ctx.playerID) && (cov_2nt5geae1v().b[9][1]++, newMills[index] === ctx.playerID);\n    })\n  });\n}\nexport function removePiece(G, ctx, position) {\n  cov_2nt5geae1v().f[13]++;\n  cov_2nt5geae1v().s[24]++;\n\n  if ((cov_2nt5geae1v().b[11][0]++, !G.haveToRemovePiece) || (cov_2nt5geae1v().b[11][1]++, // Check if player is allowed\n  G.points[position].piece === null) || (cov_2nt5geae1v().b[11][2]++, // Check if piece exists\n  G.points[position].piece.player === ctx.playerID) || // Check if doesn't player own this piece\n  (cov_2nt5geae1v().b[11][3]++, G.mills.map((mill, index) => {\n    cov_2nt5geae1v().f[14]++;\n    cov_2nt5geae1v().s[25]++;\n    return {\n      owner: mill,\n      index\n    };\n  }).filter(mill => {\n    cov_2nt5geae1v().f[15]++;\n    cov_2nt5geae1v().s[26]++;\n    return (cov_2nt5geae1v().b[12][0]++, mill.owner !== null) && (cov_2nt5geae1v().b[12][1]++, mill.owner !== ctx.playerID);\n  }).some(mill => {\n    cov_2nt5geae1v().f[16]++;\n    cov_2nt5geae1v().s[27]++;\n    return millsPositions[mill.index].includes(position);\n  })) && (cov_2nt5geae1v().b[11][4]++, isTherePieceOutsideMill(G, ctx))) {\n    cov_2nt5geae1v().b[10][0]++;\n    cov_2nt5geae1v().s[28]++;\n    return INVALID_MOVE;\n  } else {\n    cov_2nt5geae1v().b[10][1]++;\n  }\n\n  const secondPlayerId = (cov_2nt5geae1v().s[29]++, G.players.findIndex((_, i) => {\n    cov_2nt5geae1v().f[17]++;\n    cov_2nt5geae1v().s[30]++;\n    return ctx.playerID !== i.toString();\n  }));\n  const newG = (cov_2nt5geae1v().s[31]++, _objectSpread({}, G, {\n    points: Object.values(_objectSpread({}, G.points, {\n      [position]: _objectSpread({}, G.points[position], {\n        piece: null\n      })\n    })),\n    players: Object.values(_objectSpread({}, G.players, {\n      [secondPlayerId]: {\n        lostPieces: G.players[secondPlayerId].lostPieces + 1\n      }\n    })),\n    haveToRemovePiece: false\n  }));\n  cov_2nt5geae1v().s[32]++;\n  return _objectSpread({}, newG, {\n    // FIXME:\n    //   Argument of type '{ points: (number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; })[]; players: (number | ... 8 more ... | { ...; })[]; haveToRemovePiece: boolean; mills: string[]; piecesPlaced: number; }' is not assignable to parameter of type 'IG'.\n    //   Types of property 'points' are incompatible.\n    //   Type '(number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; })[]' is not assignable to type 'Point[]'.\n    //     Type 'number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; }' is not assignable to type 'Point'.\n    //       Type 'number' is not assignable to type 'Point'.\n    mills: getMills(newG)\n  });\n}\nconst GameConfig = (cov_2nt5geae1v().s[33]++, {\n  name: 'ninemensmorris',\n  phases: {\n    Place: {\n      moves: {\n        placePiece,\n        removePiece\n      },\n      next: Phase.Move,\n      endIf: G => {\n        cov_2nt5geae1v().f[18]++;\n        cov_2nt5geae1v().s[34]++;\n        return G.piecesPlaced === 18;\n      },\n      start: true\n    },\n    Move: {\n      moves: {\n        movePiece,\n        removePiece\n      }\n    }\n  },\n  turn: {\n    onBegin: (G, ctx) => {\n      cov_2nt5geae1v().f[19]++;\n      cov_2nt5geae1v().s[35]++;\n\n      if ((cov_2nt5geae1v().b[14][0]++, ctx.phase === Phase.Move) && (cov_2nt5geae1v().b[14][1]++, !G.haveToRemovePiece) && (cov_2nt5geae1v().b[14][2]++, G.players[ctx.currentPlayer].lostPieces < 6) && (cov_2nt5geae1v().b[14][3]++, !G.points.filter(point => {\n        cov_2nt5geae1v().f[20]++;\n        cov_2nt5geae1v().s[36]++;\n        return (cov_2nt5geae1v().b[15][0]++, point.piece !== null) && (cov_2nt5geae1v().b[15][1]++, point.piece.player === ctx.currentPlayer);\n      }).some(point => {\n        cov_2nt5geae1v().f[21]++;\n        cov_2nt5geae1v().s[37]++;\n        return point.connections.some(connection => {\n          cov_2nt5geae1v().f[22]++;\n          cov_2nt5geae1v().s[38]++;\n          return G.points[connection].piece === null;\n        });\n      }))) {\n        cov_2nt5geae1v().b[13][0]++;\n        cov_2nt5geae1v().s[39]++;\n        ctx.events.endGame({\n          winner: G.players.findIndex((_, i) => {\n            cov_2nt5geae1v().f[23]++;\n            cov_2nt5geae1v().s[40]++;\n            return i.toString() !== ctx.currentPlayer;\n          }).toString()\n        });\n      } else {\n        cov_2nt5geae1v().b[13][1]++;\n      }\n    },\n    onMove: (G, ctx) => {\n      cov_2nt5geae1v().f[24]++;\n      cov_2nt5geae1v().s[41]++;\n\n      if (!G.haveToRemovePiece) {\n        cov_2nt5geae1v().b[16][0]++;\n        cov_2nt5geae1v().s[42]++;\n        ctx.events.endTurn();\n      } else {\n        cov_2nt5geae1v().b[16][1]++;\n      }\n    }\n  },\n  endIf: G => {\n    cov_2nt5geae1v().f[25]++;\n    cov_2nt5geae1v().s[43]++;\n\n    if (G.players.some(player => {\n      cov_2nt5geae1v().f[26]++;\n      cov_2nt5geae1v().s[44]++;\n      return player.lostPieces === 7;\n    })) {\n      cov_2nt5geae1v().b[17][0]++;\n      cov_2nt5geae1v().s[45]++;\n      return {\n        winner: G.players.findIndex(player => {\n          cov_2nt5geae1v().f[27]++;\n          cov_2nt5geae1v().s[46]++;\n          return player.lostPieces !== 7;\n        }).toString()\n      };\n    } else {\n      cov_2nt5geae1v().b[17][1]++;\n    }\n  },\n  setup: ctx => {\n    cov_2nt5geae1v().f[28]++;\n\n    /* 00-------01-------02\n     * |        |         |\n     * |  08----09----10  |\n     * |  |     |      |  |\n     * |  |  16-17-18  |  |\n     * |  |  |      |  |  |\n     * 07-15-23    19-11-03\n     * |  |  |      |  |  |\n     * |  |  22-21-20  |  |\n     * |  |     |      |  |\n     * |  14----13----12  |\n     * |        |         |\n     * 06-------05-------04\n     */\n    const points = (cov_2nt5geae1v().s[47]++, new Array(24).fill(0).map(() => {\n      cov_2nt5geae1v().f[29]++;\n      cov_2nt5geae1v().s[48]++;\n      return {\n        connections: [],\n        piece: null\n      };\n    })); // Connect \"circles\"\n\n    cov_2nt5geae1v().s[49]++;\n    points.forEach((point, i) => {\n      cov_2nt5geae1v().f[30]++;\n      const prev = (cov_2nt5geae1v().s[50]++, i % 8 === 0 ? (cov_2nt5geae1v().b[18][0]++, i + 7) : (cov_2nt5geae1v().b[18][1]++, i - 1));\n      const next = (cov_2nt5geae1v().s[51]++, (i + 1) % 8 === 0 ? (cov_2nt5geae1v().b[19][0]++, i - 7) : (cov_2nt5geae1v().b[19][1]++, i + 1));\n      cov_2nt5geae1v().s[52]++;\n      point.connections.push(prev, next);\n    }); // Connect junctions\n\n    cov_2nt5geae1v().s[53]++;\n\n    for (let i = (cov_2nt5geae1v().s[54]++, 1); i < 9; i += 2) {\n      cov_2nt5geae1v().s[55]++;\n      points[i].connections.push(i + 8);\n      cov_2nt5geae1v().s[56]++;\n      points[i + 8].connections.push(i, i + 16);\n      cov_2nt5geae1v().s[57]++;\n      points[i + 16].connections.push(i + 8);\n    }\n\n    const players = (cov_2nt5geae1v().s[58]++, new Array(ctx.numPlayers).fill(0).map(() => {\n      cov_2nt5geae1v().f[31]++;\n      cov_2nt5geae1v().s[59]++;\n      return {\n        lostPieces: 0\n      };\n    }));\n    cov_2nt5geae1v().s[60]++;\n    return {\n      points,\n      players,\n      mills: new Array(16).fill(null),\n      piecesPlaced: 0,\n      haveToRemovePiece: false\n    };\n  }\n});\nexport const NineMensMorrisGame = (cov_2nt5geae1v().s[61]++, GameConfig);","map":{"version":3,"sources":["/home/j/Documents/FreeBoardGames.org/src/games/ninemensmorris/game.ts"],"names":["INVALID_MOVE","Phase","millsPositions","getMills","G","map","positions","points","piece","player","isTherePieceOutsideMill","ctx","point","data","safe","mills","mill","index","owner","filter","playerID","forEach","position","some","placePiece","haveToRemovePiece","newG","Object","values","key","piecesPlaced","newMills","movePiece","newPosition","connections","includes","players","lostPieces","removePiece","secondPlayerId","findIndex","_","i","toString","GameConfig","name","phases","Place","moves","next","Move","endIf","start","turn","onBegin","phase","currentPlayer","connection","events","endGame","winner","onMove","endTurn","setup","Array","fill","prev","push","numPlayers","NineMensMorrisGame"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","sourcesContent":["import { IGameArgs, IGameCtx, INVALID_MOVE } from 'boardgame.io/core';\nimport Point from './point';\nimport Player from './player';\n\nexport enum Phase {\n  Place = 'Place',\n  Move = 'Move',\n}\n\nexport interface IG {\n  points: Point[];\n  players: Player[];\n  mills: string[];\n  piecesPlaced: number;\n  haveToRemovePiece: boolean;\n}\n\nconst millsPositions = [\n  [0, 1, 2],\n  [2, 3, 4],\n  [4, 5, 6],\n  [6, 7, 0],\n  [8, 9, 10],\n  [10, 11, 12],\n  [12, 13, 14],\n  [14, 15, 8],\n  [16, 17, 18],\n  [18, 19, 20],\n  [20, 21, 22],\n  [22, 23, 16],\n  [1, 9, 17],\n  [3, 11, 19],\n  [5, 13, 21],\n  [7, 15, 23],\n];\n\nfunction getMills(G: IG) {\n  return millsPositions.map((positions) =>\n    G.points[positions[0]].piece !== null &&\n    G.points[positions[1]].piece !== null &&\n    G.points[positions[2]].piece !== null &&\n    G.points[positions[0]].piece.player === G.points[positions[1]].piece.player &&\n    G.points[positions[1]].piece.player === G.points[positions[2]].piece.player\n      ? G.points[positions[0]].piece.player\n      : null,\n  );\n}\n\nfunction isTherePieceOutsideMill(G: IG, ctx: IGameCtx) {\n  let points = G.points.map((point) => ({ data: point, safe: true }));\n  G.mills\n    .map((mill, index) => ({ owner: mill, index }))\n    .filter((mill) => mill.owner !== null && mill.owner !== ctx.playerID)\n    .forEach((mill) =>\n      millsPositions[mill.index].forEach((position) => {\n        points[position].safe = false;\n      }),\n    );\n  return points.some((point) => point.data.piece !== null && point.safe && point.data.piece.player !== ctx.playerID);\n}\n\nexport function placePiece(G: IG, ctx: IGameCtx, position: number): IG | string {\n  if (G.points[position].piece !== null || G.haveToRemovePiece) {\n    return INVALID_MOVE;\n  }\n\n  const newG: IG = {\n    ...G,\n    // FIXME:\n    // Type '(number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; })[]' is not assignable to type 'Point[]'.\n    // Type 'number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; }' is not assignable to type 'Point'.\n    points: Object.values({\n      ...G.points,\n      [position]: {\n        ...G.points[position],\n        piece: { player: ctx.playerID, key: G.piecesPlaced },\n      },\n    }) as any,\n    piecesPlaced: G.piecesPlaced + 1,\n  };\n\n  const newMills = getMills(newG);\n  return {\n    ...newG,\n    mills: newMills,\n    haveToRemovePiece: G.mills.some((mill, index) => mill !== ctx.playerID && newMills[index] === ctx.playerID),\n  };\n}\n\nexport function movePiece(G: IG, ctx: IGameCtx, position: number, newPosition: number): IG | string {\n  if (\n    G.points[position].piece === null ||\n    G.points[position].piece.player !== ctx.playerID || // Check if player owns this piece // Check if piece exists\n    G.points[newPosition].piece !== null || // Check if point isn't already occupied\n    G.haveToRemovePiece || // Check if player has to remove piece\n    (!G.points[position].connections.includes(newPosition) && // Check if connection exists\n      G.players[ctx.playerID as any].lostPieces < 6) // Ignore the check if player has < 4 pieces\n  ) {\n    return INVALID_MOVE;\n  }\n\n  const newG: IG = {\n    ...G,\n    // FIXME:\n    // Type '(number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; })[]' is not assignable to type 'Point[]'.\n    // Type 'number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; }' is not assignable to type 'Point'.\n    points: Object.values({\n      ...G.points,\n      [position]: {\n        ...G.points[position],\n        piece: null,\n      },\n      [newPosition]: {\n        ...G.points[newPosition],\n        piece: G.points[position].piece,\n      },\n    }) as any,\n  };\n\n  const newMills = getMills(newG);\n  return {\n    ...newG,\n    mills: newMills,\n    haveToRemovePiece: G.mills.some((mill, index) => mill !== ctx.playerID && newMills[index] === ctx.playerID),\n  };\n}\n\nexport function removePiece(G: IG, ctx: IGameCtx, position: number) {\n  if (\n    !G.haveToRemovePiece || // Check if player is allowed\n    G.points[position].piece === null || // Check if piece exists\n    G.points[position].piece.player === ctx.playerID || // Check if doesn't player own this piece\n    (G.mills\n      .map((mill, index) => ({ owner: mill, index }))\n      .filter((mill) => mill.owner !== null && mill.owner !== ctx.playerID)\n      .some((mill) => millsPositions[mill.index].includes(position)) &&\n      isTherePieceOutsideMill(G, ctx))\n  ) {\n    return INVALID_MOVE;\n  }\n\n  const secondPlayerId = G.players.findIndex((_, i) => ctx.playerID !== i.toString());\n\n  const newG = {\n    ...G,\n    points: Object.values({\n      ...G.points,\n      [position]: {\n        ...G.points[position],\n        piece: null,\n      },\n    }),\n    players: Object.values({\n      ...G.players,\n      [secondPlayerId]: {\n        lostPieces: G.players[secondPlayerId].lostPieces + 1,\n      },\n    }),\n    haveToRemovePiece: false,\n  };\n\n  return {\n    ...newG,\n    // FIXME:\n    //   Argument of type '{ points: (number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; })[]; players: (number | ... 8 more ... | { ...; })[]; haveToRemovePiece: boolean; mills: string[]; piecesPlaced: number; }' is not assignable to parameter of type 'IG'.\n    //   Types of property 'points' are incompatible.\n    //   Type '(number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; })[]' is not assignable to type 'Point[]'.\n    //     Type 'number | Point | ((...items: Point[]) => number) | { (...items: ConcatArray<Point>[]): Point[]; (...items: (Point | ConcatArray<Point>)[]): Point[]; } | ... 5 more ... | { ...; }' is not assignable to type 'Point'.\n    //       Type 'number' is not assignable to type 'Point'.\n    mills: getMills(newG as any),\n  };\n}\n\nconst GameConfig: IGameArgs = {\n  name: 'ninemensmorris',\n  phases: {\n    Place: {\n      moves: { placePiece, removePiece },\n      next: Phase.Move,\n      endIf: (G: IG) => G.piecesPlaced === 18,\n      start: true,\n    },\n    Move: {\n      moves: { movePiece, removePiece },\n    },\n  },\n  turn: {\n    onBegin: (G: IG, ctx) => {\n      if (\n        ctx.phase === Phase.Move &&\n        !G.haveToRemovePiece &&\n        G.players[ctx.currentPlayer as any].lostPieces < 6 &&\n        !G.points\n          .filter((point) => point.piece !== null && point.piece.player === ctx.currentPlayer)\n          .some((point) => point.connections.some((connection) => G.points[connection].piece === null))\n      ) {\n        ctx.events.endGame({ winner: G.players.findIndex((_, i) => i.toString() !== ctx.currentPlayer).toString() });\n      }\n    },\n    onMove: (G: IG, ctx) => {\n      if (!G.haveToRemovePiece) {\n        ctx.events.endTurn();\n      }\n    },\n  },\n  endIf: (G: IG) => {\n    if (G.players.some((player) => player.lostPieces === 7)) {\n      return { winner: G.players.findIndex((player) => player.lostPieces !== 7).toString() };\n    }\n  },\n  setup: (ctx): IG => {\n    /* 00-------01-------02\n     * |        |         |\n     * |  08----09----10  |\n     * |  |     |      |  |\n     * |  |  16-17-18  |  |\n     * |  |  |      |  |  |\n     * 07-15-23    19-11-03\n     * |  |  |      |  |  |\n     * |  |  22-21-20  |  |\n     * |  |     |      |  |\n     * |  14----13----12  |\n     * |        |         |\n     * 06-------05-------04\n     */\n\n    const points: Point[] = new Array(24).fill(0).map(() => ({ connections: [], piece: null }));\n    // Connect \"circles\"\n    points.forEach((point, i) => {\n      const prev = i % 8 === 0 ? i + 7 : i - 1;\n      const next = (i + 1) % 8 === 0 ? i - 7 : i + 1;\n      point.connections.push(prev, next);\n    });\n    // Connect junctions\n    for (let i = 1; i < 9; i += 2) {\n      points[i].connections.push(i + 8);\n      points[i + 8].connections.push(i, i + 16);\n      points[i + 16].connections.push(i + 8);\n    }\n\n    const players: Player[] = new Array(ctx.numPlayers).fill(0).map(() => ({ lostPieces: 0 }));\n\n    return {\n      points,\n      players,\n      mills: new Array(16).fill(null),\n      piecesPlaced: 0,\n      haveToRemovePiece: false,\n    };\n  },\n};\n\nexport const NineMensMorrisGame = GameConfig;\n"]},"metadata":{},"sourceType":"module"}