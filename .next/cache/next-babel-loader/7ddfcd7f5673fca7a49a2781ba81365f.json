{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction cov_1ax6qcfozm() {\n  var path = \"/home/j/Documents/FreeBoardGames.org/src/games/seabattle/Battle.tsx\";\n  var hash = \"d8fa7898b8f17ec3d7b1e6c03eb4f209f2de6972\";\n  var global = new Function(\"return this\")();\n  var gcv = \"__coverage__\";\n  var coverageData = {\n    path: \"/home/j/Documents/FreeBoardGames.org/src/games/seabattle/Battle.tsx\",\n    statementMap: {\n      \"0\": {\n        start: {\n          line: 31,\n          column: 4\n        },\n        end: {\n          line: 31,\n          column: 17\n        }\n      },\n      \"1\": {\n        start: {\n          line: 32,\n          column: 4\n        },\n        end: {\n          line: 38,\n          column: 6\n        }\n      },\n      \"2\": {\n        start: {\n          line: 40,\n          column: 13\n        },\n        end: {\n          line: 59,\n          column: 3\n        }\n      },\n      \"3\": {\n        start: {\n          line: 42,\n          column: 6\n        },\n        end: {\n          line: 45,\n          column: 20\n        }\n      },\n      \"4\": {\n        start: {\n          line: 44,\n          column: 10\n        },\n        end: {\n          line: 44,\n          column: 119\n        }\n      },\n      \"5\": {\n        start: {\n          line: 46,\n          column: 4\n        },\n        end: {\n          line: 58,\n          column: 5\n        }\n      },\n      \"6\": {\n        start: {\n          line: 47,\n          column: 6\n        },\n        end: {\n          line: 47,\n          column: 45\n        }\n      },\n      \"7\": {\n        start: {\n          line: 48,\n          column: 6\n        },\n        end: {\n          line: 57,\n          column: 7\n        }\n      },\n      \"8\": {\n        start: {\n          line: 49,\n          column: 8\n        },\n        end: {\n          line: 51,\n          column: 11\n        }\n      },\n      \"9\": {\n        start: {\n          line: 50,\n          column: 10\n        },\n        end: {\n          line: 50,\n          column: 50\n        }\n      },\n      \"10\": {\n        start: {\n          line: 52,\n          column: 8\n        },\n        end: {\n          line: 56,\n          column: 17\n        }\n      },\n      \"11\": {\n        start: {\n          line: 53,\n          column: 10\n        },\n        end: {\n          line: 55,\n          column: 13\n        }\n      },\n      \"12\": {\n        start: {\n          line: 54,\n          column: 12\n        },\n        end: {\n          line: 54,\n          column: 53\n        }\n      },\n      \"13\": {\n        start: {\n          line: 62,\n          column: 4\n        },\n        end: {\n          line: 73,\n          column: 5\n        }\n      },\n      \"14\": {\n        start: {\n          line: 63,\n          column: 6\n        },\n        end: {\n          line: 71,\n          column: 9\n        }\n      },\n      \"15\": {\n        start: {\n          line: 72,\n          column: 6\n        },\n        end: {\n          line: 72,\n          column: 55\n        }\n      },\n      \"16\": {\n        start: {\n          line: 77,\n          column: 19\n        },\n        end: {\n          line: 77,\n          column: 104\n        }\n      },\n      \"17\": {\n        start: {\n          line: 78,\n          column: 27\n        },\n        end: {\n          line: 78,\n          column: 86\n        }\n      },\n      \"18\": {\n        start: {\n          line: 78,\n          column: 63\n        },\n        end: {\n          line: 78,\n          column: 85\n        }\n      },\n      \"19\": {\n        start: {\n          line: 79,\n          column: 29\n        },\n        end: {\n          line: 79,\n          column: 99\n        }\n      },\n      \"20\": {\n        start: {\n          line: 79,\n          column: 75\n        },\n        end: {\n          line: 79,\n          column: 98\n        }\n      },\n      \"21\": {\n        start: {\n          line: 80,\n          column: 20\n        },\n        end: {\n          line: 80,\n          column: 38\n        }\n      },\n      \"22\": {\n        start: {\n          line: 81,\n          column: 4\n        },\n        end: {\n          line: 83,\n          column: 5\n        }\n      },\n      \"23\": {\n        start: {\n          line: 82,\n          column: 6\n        },\n        end: {\n          line: 82,\n          column: 34\n        }\n      },\n      \"24\": {\n        start: {\n          line: 84,\n          column: 4\n        },\n        end: {\n          line: 98,\n          column: 6\n        }\n      },\n      \"25\": {\n        start: {\n          line: 102,\n          column: 4\n        },\n        end: {\n          line: 108,\n          column: 5\n        }\n      },\n      \"26\": {\n        start: {\n          line: 103,\n          column: 6\n        },\n        end: {\n          line: 103,\n          column: 51\n        }\n      },\n      \"27\": {\n        start: {\n          line: 104,\n          column: 11\n        },\n        end: {\n          line: 108,\n          column: 5\n        }\n      },\n      \"28\": {\n        start: {\n          line: 105,\n          column: 6\n        },\n        end: {\n          line: 105,\n          column: 30\n        }\n      },\n      \"29\": {\n        start: {\n          line: 107,\n          column: 6\n        },\n        end: {\n          line: 107,\n          column: 39\n        }\n      },\n      \"30\": {\n        start: {\n          line: 112,\n          column: 4\n        },\n        end: {\n          line: 122,\n          column: 18\n        }\n      },\n      \"31\": {\n        start: {\n          line: 113,\n          column: 22\n        },\n        end: {\n          line: 113,\n          column: 48\n        }\n      },\n      \"32\": {\n        start: {\n          line: 114,\n          column: 6\n        },\n        end: {\n          line: 121,\n          column: 7\n        }\n      },\n      \"33\": {\n        start: {\n          line: 115,\n          column: 8\n        },\n        end: {\n          line: 115,\n          column: 57\n        }\n      },\n      \"34\": {\n        start: {\n          line: 117,\n          column: 8\n        },\n        end: {\n          line: 120,\n          column: 11\n        }\n      }\n    },\n    fnMap: {\n      \"0\": {\n        name: \"(anonymous_0)\",\n        decl: {\n          start: {\n            line: 30,\n            column: 2\n          },\n          end: {\n            line: 30,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 30,\n            column: 35\n          },\n          end: {\n            line: 39,\n            column: 3\n          }\n        },\n        line: 30\n      },\n      \"1\": {\n        name: \"(anonymous_1)\",\n        decl: {\n          start: {\n            line: 40,\n            column: 13\n          },\n          end: {\n            line: 40,\n            column: 14\n          }\n        },\n        loc: {\n          start: {\n            line: 40,\n            column: 30\n          },\n          end: {\n            line: 59,\n            column: 3\n          }\n        },\n        line: 40\n      },\n      \"2\": {\n        name: \"(anonymous_2)\",\n        decl: {\n          start: {\n            line: 43,\n            column: 8\n          },\n          end: {\n            line: 43,\n            column: 9\n          }\n        },\n        loc: {\n          start: {\n            line: 44,\n            column: 10\n          },\n          end: {\n            line: 44,\n            column: 119\n          }\n        },\n        line: 44\n      },\n      \"3\": {\n        name: \"(anonymous_3)\",\n        decl: {\n          start: {\n            line: 49,\n            column: 22\n          },\n          end: {\n            line: 49,\n            column: 23\n          }\n        },\n        loc: {\n          start: {\n            line: 49,\n            column: 36\n          },\n          end: {\n            line: 51,\n            column: 9\n          }\n        },\n        line: 49\n      },\n      \"4\": {\n        name: \"(anonymous_4)\",\n        decl: {\n          start: {\n            line: 52,\n            column: 19\n          },\n          end: {\n            line: 52,\n            column: 20\n          }\n        },\n        loc: {\n          start: {\n            line: 52,\n            column: 25\n          },\n          end: {\n            line: 56,\n            column: 9\n          }\n        },\n        line: 52\n      },\n      \"5\": {\n        name: \"(anonymous_5)\",\n        decl: {\n          start: {\n            line: 53,\n            column: 24\n          },\n          end: {\n            line: 53,\n            column: 25\n          }\n        },\n        loc: {\n          start: {\n            line: 53,\n            column: 38\n          },\n          end: {\n            line: 55,\n            column: 11\n          }\n        },\n        line: 53\n      },\n      \"6\": {\n        name: \"(anonymous_6)\",\n        decl: {\n          start: {\n            line: 61,\n            column: 2\n          },\n          end: {\n            line: 61,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 61,\n            column: 46\n          },\n          end: {\n            line: 74,\n            column: 3\n          }\n        },\n        line: 61\n      },\n      \"7\": {\n        name: \"(anonymous_7)\",\n        decl: {\n          start: {\n            line: 76,\n            column: 2\n          },\n          end: {\n            line: 76,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 76,\n            column: 11\n          },\n          end: {\n            line: 99,\n            column: 3\n          }\n        },\n        line: 76\n      },\n      \"8\": {\n        name: \"(anonymous_8)\",\n        decl: {\n          start: {\n            line: 78,\n            column: 53\n          },\n          end: {\n            line: 78,\n            column: 54\n          }\n        },\n        loc: {\n          start: {\n            line: 78,\n            column: 63\n          },\n          end: {\n            line: 78,\n            column: 85\n          }\n        },\n        line: 78\n      },\n      \"9\": {\n        name: \"(anonymous_9)\",\n        decl: {\n          start: {\n            line: 79,\n            column: 56\n          },\n          end: {\n            line: 79,\n            column: 57\n          }\n        },\n        loc: {\n          start: {\n            line: 79,\n            column: 75\n          },\n          end: {\n            line: 79,\n            column: 98\n          }\n        },\n        line: 79\n      },\n      \"10\": {\n        name: \"(anonymous_10)\",\n        decl: {\n          start: {\n            line: 101,\n            column: 2\n          },\n          end: {\n            line: 101,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 101,\n            column: 16\n          },\n          end: {\n            line: 109,\n            column: 3\n          }\n        },\n        line: 101\n      },\n      \"11\": {\n        name: \"(anonymous_11)\",\n        decl: {\n          start: {\n            line: 111,\n            column: 2\n          },\n          end: {\n            line: 111,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 111,\n            column: 24\n          },\n          end: {\n            line: 123,\n            column: 3\n          }\n        },\n        line: 111\n      },\n      \"12\": {\n        name: \"(anonymous_12)\",\n        decl: {\n          start: {\n            line: 112,\n            column: 12\n          },\n          end: {\n            line: 112,\n            column: 13\n          }\n        },\n        loc: {\n          start: {\n            line: 112,\n            column: 18\n          },\n          end: {\n            line: 122,\n            column: 5\n          }\n        },\n        line: 112\n      }\n    },\n    branchMap: {\n      \"0\": {\n        loc: {\n          start: {\n            line: 44,\n            column: 10\n          },\n          end: {\n            line: 44,\n            column: 119\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 44,\n            column: 10\n          },\n          end: {\n            line: 44,\n            column: 65\n          }\n        }, {\n          start: {\n            line: 44,\n            column: 69\n          },\n          end: {\n            line: 44,\n            column: 92\n          }\n        }, {\n          start: {\n            line: 44,\n            column: 96\n          },\n          end: {\n            line: 44,\n            column: 119\n          }\n        }],\n        line: 44\n      },\n      \"1\": {\n        loc: {\n          start: {\n            line: 46,\n            column: 4\n          },\n          end: {\n            line: 58,\n            column: 5\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 46,\n            column: 4\n          },\n          end: {\n            line: 58,\n            column: 5\n          }\n        }, {\n          start: {\n            line: 46,\n            column: 4\n          },\n          end: {\n            line: 58,\n            column: 5\n          }\n        }],\n        line: 46\n      },\n      \"2\": {\n        loc: {\n          start: {\n            line: 48,\n            column: 6\n          },\n          end: {\n            line: 57,\n            column: 7\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 48,\n            column: 6\n          },\n          end: {\n            line: 57,\n            column: 7\n          }\n        }, {\n          start: {\n            line: 48,\n            column: 6\n          },\n          end: {\n            line: 57,\n            column: 7\n          }\n        }],\n        line: 48\n      },\n      \"3\": {\n        loc: {\n          start: {\n            line: 48,\n            column: 10\n          },\n          end: {\n            line: 48,\n            column: 54\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 48,\n            column: 10\n          },\n          end: {\n            line: 48,\n            column: 29\n          }\n        }, {\n          start: {\n            line: 48,\n            column: 33\n          },\n          end: {\n            line: 48,\n            column: 54\n          }\n        }],\n        line: 48\n      },\n      \"4\": {\n        loc: {\n          start: {\n            line: 62,\n            column: 4\n          },\n          end: {\n            line: 73,\n            column: 5\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 62,\n            column: 4\n          },\n          end: {\n            line: 73,\n            column: 5\n          }\n        }, {\n          start: {\n            line: 62,\n            column: 4\n          },\n          end: {\n            line: 73,\n            column: 5\n          }\n        }],\n        line: 62\n      },\n      \"5\": {\n        loc: {\n          start: {\n            line: 77,\n            column: 28\n          },\n          end: {\n            line: 77,\n            column: 99\n          }\n        },\n        type: \"cond-expr\",\n        locations: [{\n          start: {\n            line: 77,\n            column: 51\n          },\n          end: {\n            line: 77,\n            column: 72\n          }\n        }, {\n          start: {\n            line: 77,\n            column: 75\n          },\n          end: {\n            line: 77,\n            column: 99\n          }\n        }],\n        line: 77\n      },\n      \"6\": {\n        loc: {\n          start: {\n            line: 81,\n            column: 4\n          },\n          end: {\n            line: 83,\n            column: 5\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 81,\n            column: 4\n          },\n          end: {\n            line: 83,\n            column: 5\n          }\n        }, {\n          start: {\n            line: 81,\n            column: 4\n          },\n          end: {\n            line: 83,\n            column: 5\n          }\n        }],\n        line: 81\n      },\n      \"7\": {\n        loc: {\n          start: {\n            line: 102,\n            column: 4\n          },\n          end: {\n            line: 108,\n            column: 5\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 102,\n            column: 4\n          },\n          end: {\n            line: 108,\n            column: 5\n          }\n        }, {\n          start: {\n            line: 102,\n            column: 4\n          },\n          end: {\n            line: 108,\n            column: 5\n          }\n        }],\n        line: 102\n      },\n      \"8\": {\n        loc: {\n          start: {\n            line: 103,\n            column: 13\n          },\n          end: {\n            line: 103,\n            column: 50\n          }\n        },\n        type: \"cond-expr\",\n        locations: [{\n          start: {\n            line: 103,\n            column: 36\n          },\n          end: {\n            line: 103,\n            column: 41\n          }\n        }, {\n          start: {\n            line: 103,\n            column: 44\n          },\n          end: {\n            line: 103,\n            column: 50\n          }\n        }],\n        line: 103\n      },\n      \"9\": {\n        loc: {\n          start: {\n            line: 104,\n            column: 11\n          },\n          end: {\n            line: 108,\n            column: 5\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 104,\n            column: 11\n          },\n          end: {\n            line: 108,\n            column: 5\n          }\n        }, {\n          start: {\n            line: 104,\n            column: 11\n          },\n          end: {\n            line: 108,\n            column: 5\n          }\n        }],\n        line: 104\n      },\n      \"10\": {\n        loc: {\n          start: {\n            line: 114,\n            column: 6\n          },\n          end: {\n            line: 121,\n            column: 7\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 114,\n            column: 6\n          },\n          end: {\n            line: 121,\n            column: 7\n          }\n        }, {\n          start: {\n            line: 114,\n            column: 6\n          },\n          end: {\n            line: 121,\n            column: 7\n          }\n        }],\n        line: 114\n      }\n    },\n    s: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0,\n      \"7\": 0,\n      \"8\": 0,\n      \"9\": 0,\n      \"10\": 0,\n      \"11\": 0,\n      \"12\": 0,\n      \"13\": 0,\n      \"14\": 0,\n      \"15\": 0,\n      \"16\": 0,\n      \"17\": 0,\n      \"18\": 0,\n      \"19\": 0,\n      \"20\": 0,\n      \"21\": 0,\n      \"22\": 0,\n      \"23\": 0,\n      \"24\": 0,\n      \"25\": 0,\n      \"26\": 0,\n      \"27\": 0,\n      \"28\": 0,\n      \"29\": 0,\n      \"30\": 0,\n      \"31\": 0,\n      \"32\": 0,\n      \"33\": 0,\n      \"34\": 0\n    },\n    f: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0,\n      \"7\": 0,\n      \"8\": 0,\n      \"9\": 0,\n      \"10\": 0,\n      \"11\": 0,\n      \"12\": 0\n    },\n    b: {\n      \"0\": [0, 0, 0],\n      \"1\": [0, 0],\n      \"2\": [0, 0],\n      \"3\": [0, 0],\n      \"4\": [0, 0],\n      \"5\": [0, 0],\n      \"6\": [0, 0],\n      \"7\": [0, 0],\n      \"8\": [0, 0],\n      \"9\": [0, 0],\n      \"10\": [0, 0]\n    },\n    _coverageSchema: \"1a1c01bbd47fc00a2c39e90264f33305004495a9\",\n    hash: \"d8fa7898b8f17ec3d7b1e6c03eb4f209f2de6972\"\n  };\n  var coverage = global[gcv] || (global[gcv] = {});\n\n  if (!coverage[path] || coverage[path].hash !== hash) {\n    coverage[path] = coverageData;\n  }\n\n  var actualCoverage = coverage[path];\n\n  cov_1ax6qcfozm = function () {\n    return actualCoverage;\n  };\n\n  return actualCoverage;\n}\n\ncov_1ax6qcfozm();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport { Radar } from './Radar';\nimport { playSeabattleSound } from './sound';\nimport Typography from '@material-ui/core/Typography';\nexport class Battle extends (React.Component) {\n  constructor(props) {\n    cov_1ax6qcfozm().f[0]++;\n    cov_1ax6qcfozm().s[0]++;\n    super(props);\n\n    _defineProperty(this, \"_onClick\", (cov_1ax6qcfozm().s[2]++, cell => {\n      cov_1ax6qcfozm().f[1]++;\n      const uniqueMove = (cov_1ax6qcfozm().s[3]++, this.state.G.salvos.filter(salvo => {\n        cov_1ax6qcfozm().f[2]++;\n        cov_1ax6qcfozm().s[4]++;\n        return (cov_1ax6qcfozm().b[0][0]++, salvo.player === parseInt(this.state.currentPlayer, 10)) && (cov_1ax6qcfozm().b[0][1]++, salvo.cell.x === cell.x) && (cov_1ax6qcfozm().b[0][2]++, salvo.cell.y === cell.y);\n      }).length === 0);\n      cov_1ax6qcfozm().s[5]++;\n\n      if (uniqueMove) {\n        cov_1ax6qcfozm().b[1][0]++;\n        cov_1ax6qcfozm().s[6]++;\n        this.props.moves.salvo(cell.x, cell.y);\n        cov_1ax6qcfozm().s[7]++;\n\n        if ((cov_1ax6qcfozm().b[3][0]++, this.props.isAIGame) && (cov_1ax6qcfozm().b[3][1]++, !this.state.aiPlaying)) {\n          cov_1ax6qcfozm().b[2][0]++;\n          cov_1ax6qcfozm().s[8]++;\n          this.setState(oldState => {\n            cov_1ax6qcfozm().f[3]++;\n            cov_1ax6qcfozm().s[9]++;\n            return _objectSpread({}, oldState, {\n              aiPlaying: true\n            });\n          });\n          cov_1ax6qcfozm().s[10]++;\n          setTimeout(() => {\n            cov_1ax6qcfozm().f[4]++;\n            cov_1ax6qcfozm().s[11]++;\n            this.setState(oldState => {\n              cov_1ax6qcfozm().f[5]++;\n              cov_1ax6qcfozm().s[12]++;\n              return _objectSpread({}, oldState, {\n                aiPlaying: false\n              });\n            });\n          }, 2500);\n        } else {\n          cov_1ax6qcfozm().b[2][1]++;\n        }\n      } else {\n        cov_1ax6qcfozm().b[1][1]++;\n      }\n    }));\n\n    cov_1ax6qcfozm().s[1]++;\n    this.state = {\n      G: props.G,\n      playerID: props.playerID,\n      currentPlayer: props.currentPlayer,\n      showSalvo: false,\n      aiPlaying: false\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    cov_1ax6qcfozm().f[6]++;\n    cov_1ax6qcfozm().s[13]++;\n\n    if (prevProps.currentPlayer !== this.props.currentPlayer) {\n      cov_1ax6qcfozm().b[4][0]++;\n      cov_1ax6qcfozm().s[14]++;\n      this.setState({\n        G: this.props.G,\n        playerID: this.props.playerID,\n        currentPlayer: this.props.currentPlayer,\n        showSalvo: true,\n        prevPlayer: prevProps.currentPlayer,\n        startTime: Date.now(),\n        salvo: this.props.G.salvos[this.props.G.salvos.length - 1]\n      });\n      cov_1ax6qcfozm().s[15]++;\n      requestAnimationFrame(this._animate(Date.now()));\n    } else {\n      cov_1ax6qcfozm().b[4][1]++;\n    }\n  }\n\n  render() {\n    cov_1ax6qcfozm().f[7]++;\n    const player = (cov_1ax6qcfozm().s[16]++, parseInt(this.state.showSalvo ? (cov_1ax6qcfozm().b[5][0]++, this.state.prevPlayer) : (cov_1ax6qcfozm().b[5][1]++, this.state.currentPlayer), 10));\n    const ships = (cov_1ax6qcfozm().s[17]++, this.state.G.ships.filter(ship => {\n      cov_1ax6qcfozm().f[8]++;\n      cov_1ax6qcfozm().s[18]++;\n      return ship.player !== player;\n    }));\n    const salvos = (cov_1ax6qcfozm().s[19]++, this.state.G.salvos.filter(salvo => {\n      cov_1ax6qcfozm().f[9]++;\n      cov_1ax6qcfozm().s[20]++;\n      return salvo.player === player;\n    }));\n    const message = (cov_1ax6qcfozm().s[21]++, this._getMessage());\n    cov_1ax6qcfozm().s[22]++;\n\n    if (this.props.getSoundPref()) {\n      cov_1ax6qcfozm().b[6][0]++;\n      cov_1ax6qcfozm().s[23]++;\n      playSeabattleSound(message);\n    } else {\n      cov_1ax6qcfozm().b[6][1]++;\n    }\n\n    cov_1ax6qcfozm().s[24]++;\n    return __jsx(\"div\", null, __jsx(Typography, {\n      variant: \"h5\",\n      style: {\n        textAlign: 'center',\n        color: 'white',\n        marginBottom: '16px'\n      }\n    }, message), __jsx(Radar, {\n      player: player,\n      ships: ships,\n      salvos: salvos,\n      editable: false,\n      blinkSalvo: this.state.showSalvo,\n      onClick: this._onClick\n    }));\n  }\n\n  _getMessage() {\n    cov_1ax6qcfozm().f[10]++;\n    cov_1ax6qcfozm().s[25]++;\n\n    if (this.state.showSalvo) {\n      cov_1ax6qcfozm().b[7][0]++;\n      cov_1ax6qcfozm().s[26]++;\n      return this.state.salvo.hit ? (cov_1ax6qcfozm().b[8][0]++, 'HIT') : (cov_1ax6qcfozm().b[8][1]++, 'MISS');\n    } else {\n      cov_1ax6qcfozm().b[7][1]++;\n      cov_1ax6qcfozm().s[27]++;\n\n      if (this.state.playerID === this.state.currentPlayer) {\n        cov_1ax6qcfozm().b[9][0]++;\n        cov_1ax6qcfozm().s[28]++;\n        return 'CLICK TO SHOOT';\n      } else {\n        cov_1ax6qcfozm().b[9][1]++;\n        cov_1ax6qcfozm().s[29]++;\n        return 'Waiting for opponent...';\n      }\n    }\n  }\n\n  _animate(now) {\n    cov_1ax6qcfozm().f[11]++;\n    cov_1ax6qcfozm().s[30]++;\n    return (() => {\n      cov_1ax6qcfozm().f[12]++;\n      const elapsed = (cov_1ax6qcfozm().s[31]++, now - this.state.startTime);\n      cov_1ax6qcfozm().s[32]++;\n\n      if (elapsed < 2e3) {\n        cov_1ax6qcfozm().b[10][0]++;\n        cov_1ax6qcfozm().s[33]++;\n        requestAnimationFrame(this._animate(Date.now()));\n      } else {\n        cov_1ax6qcfozm().b[10][1]++;\n        cov_1ax6qcfozm().s[34]++;\n        this.setState(_objectSpread({}, this.state, {\n          showSalvo: false\n        }));\n      }\n    }).bind(this);\n  }\n\n}","map":{"version":3,"sources":["/home/j/Documents/FreeBoardGames.org/src/games/seabattle/Battle.tsx"],"names":["React","Radar","playSeabattleSound","Typography","Battle","Component","constructor","props","cell","uniqueMove","state","G","salvos","filter","salvo","player","parseInt","currentPlayer","x","y","length","moves","isAIGame","aiPlaying","setState","oldState","setTimeout","playerID","showSalvo","componentDidUpdate","prevProps","prevPlayer","startTime","Date","now","requestAnimationFrame","_animate","render","ships","ship","message","_getMessage","getSoundPref","textAlign","color","marginBottom","_onClick","hit","elapsed","bind"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { Radar } from './Radar';\nimport { ISeabattleState, IShip, ISalvo, ICell } from './game';\nimport { playSeabattleSound } from './sound';\nimport Typography from '@material-ui/core/Typography';\n\ninterface IBattleProps {\n  G: ISeabattleState;\n  ctx: any;\n  moves: any;\n  playerID: string;\n  currentPlayer: string;\n  isAIGame?: boolean;\n  getSoundPref: () => boolean;\n}\n\ninterface IBattleState {\n  G: ISeabattleState;\n  playerID: string;\n  currentPlayer: string;\n  showSalvo: boolean;\n  prevPlayer?: string;\n  startTime?: number;\n  salvo?: ISalvo;\n  aiPlaying?: boolean;\n}\n\nexport class Battle extends React.Component<IBattleProps, IBattleState> {\n  constructor(props: IBattleProps) {\n    super(props);\n    this.state = {\n      G: props.G,\n      playerID: props.playerID,\n      currentPlayer: props.currentPlayer,\n      showSalvo: false,\n      aiPlaying: false,\n    };\n  }\n  _onClick = (cell: ICell) => {\n    const uniqueMove =\n      this.state.G.salvos.filter(\n        (salvo) =>\n          salvo.player === parseInt(this.state.currentPlayer, 10) && salvo.cell.x === cell.x && salvo.cell.y === cell.y,\n      ).length === 0;\n    if (uniqueMove) {\n      this.props.moves.salvo(cell.x, cell.y);\n      if (this.props.isAIGame && !this.state.aiPlaying) {\n        this.setState((oldState) => {\n          return { ...oldState, aiPlaying: true };\n        });\n        setTimeout(() => {\n          this.setState((oldState) => {\n            return { ...oldState, aiPlaying: false };\n          });\n        }, 2500);\n      }\n    }\n  };\n\n  componentDidUpdate(prevProps: IBattleProps) {\n    if (prevProps.currentPlayer !== this.props.currentPlayer) {\n      this.setState({\n        G: this.props.G,\n        playerID: this.props.playerID,\n        currentPlayer: this.props.currentPlayer,\n        showSalvo: true,\n        prevPlayer: prevProps.currentPlayer,\n        startTime: Date.now(),\n        salvo: this.props.G.salvos[this.props.G.salvos.length - 1],\n      });\n      requestAnimationFrame(this._animate(Date.now()));\n    }\n  }\n\n  render() {\n    const player = parseInt(this.state.showSalvo ? this.state.prevPlayer : this.state.currentPlayer, 10);\n    const ships: IShip[] = this.state.G.ships.filter((ship) => ship.player !== player);\n    const salvos: ISalvo[] = this.state.G.salvos.filter((salvo: ISalvo) => salvo.player === player);\n    const message = this._getMessage();\n    if (this.props.getSoundPref()) {\n      playSeabattleSound(message);\n    }\n    return (\n      <div>\n        <Typography variant=\"h5\" style={{ textAlign: 'center', color: 'white', marginBottom: '16px' }}>\n          {message}\n        </Typography>\n        <Radar\n          player={player}\n          ships={ships}\n          salvos={salvos}\n          editable={false}\n          blinkSalvo={this.state.showSalvo}\n          onClick={this._onClick}\n        />\n      </div>\n    );\n  }\n\n  _getMessage() {\n    if (this.state.showSalvo) {\n      return this.state.salvo.hit ? 'HIT' : 'MISS';\n    } else if (this.state.playerID === this.state.currentPlayer) {\n      return 'CLICK TO SHOOT';\n    } else {\n      return 'Waiting for opponent...';\n    }\n  }\n\n  _animate(now: number) {\n    return (() => {\n      const elapsed = now - this.state.startTime;\n      if (elapsed < 2e3) {\n        requestAnimationFrame(this._animate(Date.now()));\n      } else {\n        this.setState({\n          ...this.state,\n          showSalvo: false,\n        });\n      }\n    }).bind(this);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}